<!DOCTYPE html>
<html lang="en">
<head>
  <base href="/demo-site-curiositas/">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Curiositas - Curiosity CafÃ©</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --sage-green:#8B9D83; 
      --forest-green:#4A5D4A; 
      --cream:#F5F1E6; 
      --terracotta:#D4A574;
      --warm-beige:#E8DCC4; 
      --olive:#6B7C59; 
      --soft-orange:#E8A87C; 
      --charcoal:#2C2A28;
      --holiday:#c81e1e; /* red-700 */
      --closed:#9ca3af;  /* gray-400 */
      --open:#4A5D4A;    /* forest */
      --c-curiosity:#FACC15;   /* thick yellow C  */
      --c-creation:#73ae35;    /* green ring      */
      --c-care:#3B82F6;        /* blue ring       */
      --c-collaboration:#DB2777;      /* magenta ring    */
    }

    /* --- Multi-level nav --- */
.nav-group { position:relative; }
.nav-button { padding:.5rem .75rem; font-weight:600; border-radius:.5rem; }
.nav-button:focus-visible { outline:2px solid var(--sage-green); outline-offset:2px; }
.menu-panel {
  position:absolute; top:110%; left:0; min-width:220px;
  background:#fff; border:1px solid rgba(0,0,0,.06);
  border-radius:.75rem; box-shadow:0 14px 30px rgba(0,0,0,.12);
  padding:.5rem; display:none; z-index:60;
}
.menu-panel.open { display:block; }
.menu-item { display:flex; align-items:center; gap:.5rem;
  padding:.5rem .6rem; border-radius:.5rem; }
.menu-item:hover { background:rgba(232,220,196,.5); }
.menu-section-title { font-size:.75rem; opacity:.7; padding:.35rem .5rem; }

@media (min-width: 1024px){
  .menu-panel.mega { display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:.25rem .5rem; min-width:460px; }
}

/* Mobile accordion */
.accordion { border:1px solid var(--warm-beige); border-radius:.75rem; background:#fff; overflow:hidden; }
.acc-header { display:flex; justify-content:space-between; align-items:center; padding:.75rem 1rem; font-weight:600; }
.acc-content { display:none; padding:.5rem 1rem 1rem; }
.acc-content.show { display:block; }


    *{ box-sizing:border-box; }
    body{ margin:0; font-family: system-ui,-apple-system,BlinkMacSystemFont,"Inter",sans-serif; background:var(--cream); color:var(--charcoal); }

    .fade-enter{opacity:0; transform:translateY(16px);} .fade-enter-active{opacity:1; transform:translateY(0); transition:all .35s ease;}

    @keyframes float { 0%,100%{transform:translateY(0) rotate(0deg);} 50%{transform:translateY(-30px) rotate(5deg);} }
    .float-element{ animation: float 20s ease-in-out infinite; font-size:4rem; position:absolute; opacity:0.15; pointer-events:none; }

    @keyframes bounce-subtle { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-5px);} }
    .animate-bounce-subtle{ animation:bounce-subtle 3s ease-in-out infinite; }

    .season-card{ transition: transform .25s ease, box-shadow .25s ease; will-change: transform; }
    .season-card:hover{ transform: translateY(-6px) rotate(-2.5deg); box-shadow: 0 14px 30px rgba(0,0,0,.12); }
    .season-emoji{ display:inline-block; }
    @media (prefers-reduced-motion: reduce){ .season-card{ transition:none;} .season-card:hover{ transform:none; box-shadow:none;} }

    .card-hover{ position:relative; transition:transform .3s cubic-bezier(.34,1.56,.64,1), box-shadow .3s ease; }
    .card-hover::after{ content:''; position:absolute; inset:0; border-radius:inherit; box-shadow:0 10px 30px rgba(0,0,0,.15); opacity:0; transition:opacity .3s; pointer-events:none; }
    .card-hover:hover{ transform:translateY(-8px) scale(1.02);} .card-hover:hover::after{ opacity:1; }

    .btn{ display:inline-flex; align-items:center; justify-content:center; border-radius:9999px; padding:.5rem 1.5rem; font-size:.875rem; line-height:1.25rem; font-weight:500; border:none; cursor:pointer; position:relative; overflow:hidden; transition:all .3s ease; background:var(--terracotta); color:#fff; }
    .btn.border{ background:#fff; color:var(--forest-green); border:1px solid rgba(0,0,0,.1); }
    .btn::before{ content:''; position:absolute; top:50%; left:50%; width:0; height:0; border-radius:50%; background:rgba(255,255,255,.3); transform:translate(-50%,-50%); transition:width .6s,height .6s; }
    .btn:hover::before{ width:300px; height:300px; }

    .nav-link{ position:relative; padding-bottom:4px; }
    .nav-link::after{ content:''; position:absolute; bottom:0; left:0; width:0; height:2px; background:var(--forest-green); transition:width .3s ease; }
    .nav-link:hover::after{ width:100%; }

    @keyframes pulse-glow { 0%,100%{box-shadow:0 0 0 0 rgba(139,157,131,.7);} 50%{box-shadow:0 0 0 10px rgba(139,157,131,0);} }
    .icon-pulse{ animation:pulse-glow 2s infinite; border-radius:50%; }

    .testimonial-track{transition:transform .5s ease-in-out; display:flex;} .testimonial-slide{min-width:100%;}

    /* è¿½åŠ ï¼šã‚¢ãƒ‹ãƒ¡ä¸€æ™‚åœæ­¢ç”¨ */
    .anim-paused{ animation-play-state: paused !important; }

    /* â€”â€” Philosophy Dream Strips â€”â€” */
    .philo-wrap{
      position:relative; overflow:hidden; border-radius:1rem;
      background:linear-gradient(135deg, rgba(139,157,131,.15), rgba(232,220,196,.35));
      padding:2rem;
      -webkit-mask-image:linear-gradient(90deg, transparent 0%, #000 8%, #000 92%, transparent 100%);
              mask-image:linear-gradient(90deg, transparent 0%, #000 8%, #000 92%, transparent 100%);
    }

    .philo-row{
      display:flex;
      flex-direction:column;   /* stack rows vertically */
      gap:1rem;                /* space between the two rows */
      white-space:nowrap;
      margin:0 auto;
    }

    .philo-img{
      width:280px; height:180px; object-fit:cover; border-radius:.75rem;
      filter:saturate(1.05) contrast(1.02);
      box-shadow:0 10px 24px rgba(0,0,0,.10);
    }

    .philo-track{
      display:flex; gap:1rem; animation:slide-left 60s linear infinite;
    }
    .philo-track.rev{ animation:slide-right 60s linear infinite; }

    @keyframes slide-left{
      0%{ transform:translateX(0); }
      100%{ transform:translateX(-50%); }
    }
    @keyframes slide-right{
      0%{ transform:translateX(-50%); }
      100%{ transform:translateX(0); }
    }

    /* line-by-line fade for philosophy text */
    .philo-lines{ line-height:1.7; }
    .philo-line{ opacity:0; transform:translateY(10px); transition:opacity .5s ease, transform .5s ease; }
    .philo-line.show{ opacity:1; transform:translateY(0); }

    @media (prefers-reduced-motion: reduce){
      .philo-line{ opacity:1; transform:none; }
    }

    /* Blooming flower animations */
    @keyframes stemGrow {
      0% { stroke-dashoffset: 320; opacity: 0; }
      30% { opacity: 1; }
      100% { stroke-dashoffset: 0; opacity: 1; }
    }

    @keyframes petalBloom {
      0% { transform: scale(0.2) rotate(var(--rot)); opacity: 0; }
      60% { opacity: 1; }
      100% { transform: scale(1) rotate(var(--rot)); opacity: 1; }
    }

    @keyframes centerPop {
      0% { transform: scale(0); opacity: 0; }
      60% { transform: scale(1.15); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes sparkle {
      0%, 100% { transform: scale(0); opacity: 0; }
      40% { transform: scale(1); opacity: 1; }
    }

    .bloom-stem {
      stroke-dasharray: 320;
      stroke-dashoffset: 320;
      animation: stemGrow 2.2s ease forwards 0.1s;
    }

    .bloom-petal {
      transform-origin: 100px 98px;
      animation: petalBloom 900ms cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
      opacity: 0;
    }

    .bloom-petal[data-i="0"] { animation-delay: 0.35s; }
    .bloom-petal[data-i="1"] { animation-delay: 0.45s; }
    .bloom-petal[data-i="2"] { animation-delay: 0.55s; }
    .bloom-petal[data-i="3"] { animation-delay: 0.65s; }
    .bloom-petal[data-i="4"] { animation-delay: 0.75s; }
    .bloom-petal[data-i="5"] { animation-delay: 0.85s; }

    .bloom-center {
      animation: centerPop 0.8s ease-out forwards 0.9s;
      transform-origin: 100px 98px;
      opacity: 0;
    }

    .bloom-sparkle {
      opacity: 0;
      transform-origin: center;
      animation: sparkle 1.6s ease infinite;
    }

    .anim-paused {
      animation-play-state: paused !important;
    }

    @media (prefers-reduced-motion: reduce) {
      .bloom-stem, .bloom-petal, .bloom-center, .bloom-sparkle {
        animation: none;
      }
      .bloom-petal, .bloom-center {
        opacity: 1;
      }
    }

    /* Make the bloom SVG scale nicely on mobile */
    .bloom-svg{
      width: 100%;
      height: auto;
      max-width: 260px;      /* comfy phone size */
      display: block;
      margin: 0 auto;        /* center it when stacked under text */
    }
    @media (min-width: 768px){
      .bloom-svg{ max-width: 320px; }  /* a bit larger on md+ */
    }

    .recipe-card{perspective:1000px; height:20rem; position:relative;}
    .recipe-front,.recipe-back{ position:absolute; inset:0; backface-visibility:hidden; transition:transform .5s ease; }
    .recipe-front{ background:#fff; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:1.5rem; }
    .recipe-back{ background:linear-gradient(135deg,var(--sage-green),var(--forest-green)); color:#fff; padding:1.5rem; transform:translateY(100%); overflow-y:auto; }
    .recipe-card:hover .recipe-front{transform:translateY(-100%);} .recipe-card:hover .recipe-back{transform:translateY(0);}    

    .garden-map{ background:var(--cream); border:4px solid var(--sage-green); border-radius:1rem; padding:2rem; position:relative; }
    .plant-marker{position:absolute; cursor:pointer;} .plant-tooltip{ position:absolute; bottom:100%; left:50%; transform:translateX(-50%); background:var(--charcoal); color:#fff; font-size:.75rem; line-height:1rem; padding:.25rem .5rem; border-radius:.25rem; margin-bottom:.5rem; white-space:nowrap; opacity:0; transition:opacity .2s; pointer-events:none; }
    .plant-marker:hover .plant-tooltip{opacity:1;}

    html{scroll-behavior:smooth;}

    /* â€”â€” Values card image header â€”â€” */
    .value-hero{
      position: relative;
      height: 160px;
      overflow: hidden;
      border-top-left-radius: 0.75rem;  /* match card radius */
      border-top-right-radius: 0.75rem;
    }
    .value-hero img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: saturate(1.02) contrast(1.02);
    }
    .value-hero::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.05) 50%, transparent);
    }
    .value-pill{
      position:absolute; left:12px; bottom:12px;
      font-size:.75rem; line-height:1rem;
      color:#fff; background:rgba(0,0,0,.45);
      padding:.25rem .5rem; border-radius:.4rem;
      backdrop-filter: blur(3px);
    }

    /* Calendar styles */
    .cal-wrap{ border:1px solid rgba(0,0,0,.06); background:#fff; border-radius:1rem; overflow:hidden; }
    .cal-header{ display:flex; align-items:center; justify-content:space-between; padding:1rem 1.25rem; background:linear-gradient(135deg, rgba(139,157,131,0.1), rgba(232,220,196,0.3)); }
    .cal-title{ font-weight:700; }
    .cal-grid{ display:grid; grid-template-columns:repeat(7,1fr); }
    .cal-dow{ font-size:.75rem; text-transform:uppercase; letter-spacing:.06em; padding:.5rem .75rem; color:#4b5563; background:#fafaf9; border-bottom:1px solid #eee; }
    .cal-cell{ min-height:84px; padding:.5rem .5rem 1.25rem; border-bottom:1px solid #f1f5f9; border-right:1px solid #f1f5f9; position:relative; }
    .cal-cell:last-child{ border-right:none; }
    .cal-date{ font-size:.75rem; font-weight:600; }
    .cal-dot{ width:6px; height:6px; border-radius:9999px; display:inline-block; margin-right:4px; }
    .cal-chip{ font-size:.65rem; padding:.1rem .35rem; border-radius:.35rem; border:1px solid rgba(0,0,0,.08); }
    .cal-today{ outline:2px solid var(--terracotta); outline-offset:-2px; background:linear-gradient(180deg, rgba(212,165,116,.1), transparent); }
    .cal-holiday .cal-date{ color:var(--holiday); }
    .cal-closed .cal-date{ color:var(--closed); }
    .cal-open .cal-date{ color:var(--open); }
    .cal-other-month{ opacity:.45; }
    .cal-tooltip{ position:absolute; z-index:10; bottom:6px; left:6px; right:6px; background:#111827; color:#fff; border-radius:.5rem; font-size:.75rem; line-height:1rem; padding:.5rem .6rem; display:none; box-shadow:0 8px 28px rgba(0,0,0,.25); }
    .cal-cell:hover .cal-tooltip{ display:block; }
    .legend-dot{ width:10px; height:10px; border-radius:50%; display:inline-block; }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="sticky top-0 z-50 border-b" style="background: rgba(245, 241, 230, 0.9); backdrop-filter: blur(8px); border-color: var(--warm-beige);">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex items-center justify-between py-3">
        <button id="brandBtn" class="font-serif text-xl" style="color: var(--forest-green);" aria-label="Go home">Curiositas</button>
        <nav id="desktopNav" class="hidden md:flex gap-6 items-center"></nav>
        <div class="md:hidden flex items-center gap-2">
          <button id="langBtnSm" class="rounded-full text-white px-3 text-sm" style="background: var(--sage-green);">æ—¥æœ¬èª</button>
          <button id="menuToggle" class="p-2 rounded-lg border" style="border-color: var(--warm-beige);" aria-expanded="false">â˜°</button>
        </div>
      </div>
      <nav id="mobileNavWrap" class="md:hidden pb-4 hidden"><div id="mobileNav" class="grid grid-cols-2 gap-3"></div></nav>
    </div>
  </header>

  <!-- Page container -->
  <main id="app" class="flex-grow"></main>

  <!-- Footer -->
  <footer class="text-center mt-20 relative py-10" style="background: var(--charcoal); color: var(--cream);">
    <p class="text-sm mb-2 mt-6">Â© 2025 Curiositas</p>
    <p id="footerAbout" class="text-sm max-w-3xl mx-auto px-4">A community space where people and cultures meet, learn, and grow together.</p>
  </footer>

  <!-- Sticky Booking Bar -->
  <div id="stickyBooking" class="fixed bottom-6 right-6 z-50" style="transform: translateY(200px); transition:transform .3s;">
    <button onclick="navigate('Visit')" class="btn flex items-center gap-3 px-6 py-4 hover:scale-105" style="background: var(--terracotta);">
      <span class="text-2xl">ğŸ—“ï¸</span>
      <span class="font-semibold" id="stickyBookingText">Book Your Visit</span>
    </button>
  </div>

  <script>
    /* Tailwind config */
    tailwind.config = { theme: { extend: { colors: { 'sage-green':'#8B9D83', 'forest-green':'#4A5D4A','cream':'#F5F1E6','terracotta':'#D4A574','warm-beige':'#E8DCC4','olive':'#6B7C59','soft-orange':'#E8A87C','charcoal':'#2C2A28'} } } };

    /* ---- Image Helper (for Unsplash or local images) ---- */
    function imgUrl(path, w = 1200, q = 80) {
      // If the path already has parameters, append with &
      const sep = path.includes("?") ? "&" : "?";
      return `${path}${sep}auto=format&fit=crop&w=${w}&q=${q}`;
    }

    /* i18n */
    const dict = {
      EN: {
        brand:"Curiositas",
        nav:[
          {k: "Explore", en: "Explore", jp: "çŸ¥ã‚‹",
            children: [
              { k: "Home", en: "Home", jp: "ãƒ›ãƒ¼ãƒ " },
              { k: "Values", en: "Values", jp: "ä¾¡å€¤è¦³" },
              { k: "Stories", en: "Stories", jp: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼" },
              { k: "Gallery", en: "Gallery", jp: "ã‚®ãƒ£ãƒ©ãƒªãƒ¼" }
            ]
          },
          {
            k: "Experience", en: "Experience", jp: "ä½“é¨“",
            children: [
              { k: "Cafe", en: "Cafe", jp: "ã‚«ãƒ•ã‚§" },
              { k: "Garden", en: "Garden", jp: "åº­ãƒ»ç•‘" },
              { k: "Spaces", en: "Spaces", jp: "ã‚¹ãƒšãƒ¼ã‚¹" },
              { k: "Programs", en: "Programs", jp: "ãƒ—ãƒ­ã‚°ãƒ©ãƒ " },
              { k: "Events", en: "Events", jp: "ã‚¤ãƒ™ãƒ³ãƒˆ" }
            ]
          },
          {
            k: "Plan", en: "Plan", jp: "è¨ˆç”»",
            children: [
              { k: "Calendar", en: "Calendar", jp: "ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼" },
              { k: "Visit", en: "Visit", jp: "è¨ªå•" }
            ]
          }
        ],
        heroTitle:"Curiositas",
        heroSub:"Where People & Cultures Meet",
        heroDesc:"Share meals, grow food, make things, read together, stay the night, and keep learning â€” all in one place.",
        cta1:"Explore Events", cta2:"Join Our Community",
        welcome:"Welcome to Our Community", welcomeSub:"Your knowledge, skills, and curiosity shape our shared space", welcomeP:"This is more than a placeâ€”it's a living community where participants become co-creators.",
        howItWorks:"How It Works", visit:"Visit", experience:"Experience", share:"Share", grow:"Grow",
        happening:"What's Happening", by:"Hosted by", join:"Join Event",
        byTheNumbers:"By the Numbers", communityMembers:"Community Members", monthlyWorkshops:"Monthly Workshops", gardenHarvests:"Garden Harvests/Year", languagesSpoken:"Languages Spoken",
        seasonalRhythm:"Seasonal Rhythm", spring:"Spring", summer:"Summer", autumn:"Autumn", winter:"Winter",
        communityVoices:"Community Voices", interactiveGarden:"Interactive Garden", hoverPlants:"Hover over plants to learn more", readyHarvest:"Ready to harvest", viewRecipe:"View Full Recipe", ingredients:"Ingredients",
        stickyBooking:"Book Your Visit", daysLeft:"d", hoursLeft:"h left", happeningNow:"Happening Now!",
        backSpaces:"Back to Spaces", backEvents:"Back to Events", backStories:"Back to Stories",
        recipes:"Community Recipes", shareRecipe:"Share Your Recipe",
        philosophy:"Our Philosophy", philosophyText:"We meet at the stove.<br>We chop, simmer, and taste.<br><br>Recipes arrive as memories, gestures,<br>or small stories shared over cutting boards.<br><br>They are not fixed.<br>They expand and change with each pair of hands that join in.<br><br>Seasonal ingredients, family traditions, and techniques learned while traveling<br>all find their way to our table.<br><br>Some of us cook every day, others are just beginning.<br>Children, neighbors, grandparents, travelers.<br>In the blended movement of our hands and conversations,<br>cultures overlap, memories surface, and small discoveries appear.<br><br>Here, food is a shared language.<br>A meal is more than what fills a bowl.<br>It is the time, laughter, patience, and curiosity we share while making it.<br><br>Our recipes are always growing.<br>â€œMaybe just a bit more of this,â€<br>â€œIn my hometown, we do it like thisâ€¦â€<br>These gentle exchanges create the flavors of each season.<br><br>Every gathering becomes a quiet celebration:<br>Of seasons, of neighbors, of simply being here together.",
        cafeTitle:"CafÃ© & Community Kitchen", cafeSub:"Where recipes evolve. Meals unite.",
        eventsCal:"Events", eventsSub:"Join workshops, gatherings, and community activities", date:"Date:", time:"Time:", capacity:"Capacity:", reserve:"Reserve a spot",
        hostEventQ:"Want to Host an Event?", hostEventP:"Share your skills and passion with our community", propose:"Propose a Workshop",
        spacesTitle:"Our Spaces", spacesSub:"Explore the different areas of our community home",
        valuesTitle:"Education & Values", valuesSub:"Curiosity, Creation, Care, Collaboration", valueDesc:(v)=>`Exploring how ${v} connects people and planet.`,
        storiesTitle:"Community Stories", storiesSub:"Real voices and reflections from our members", readMore:"Read story",
        programsTitle:"Programs", programsSub:"Everyone teaches, everyone learns",
        galleryTitle:"Community Gallery", gallerySub:"Life happens in the in-between moments",
        gardenTitle:"Farm & Garden", gardenSub:"Growing food, knowledge, and community together", growing:"What's Growing", involved:"Get Involved", sustain:"Sustainability",
        visitUs:"Visit Us", visitSub:"Come experience our community in person", location:"Location", hours:"Hours", contact:"Contact", sendInquiry:"Send Inquiry",
        firstGuide:"First Visit Guide", step1:"Check our event calendar", step2:"Drop by for coffee and conversation", step3:"Join a workshop or activity", step4:"Meet members & discover how you can contribute", step5:"Become part of our growing community!",
        langToggle:"æ—¥æœ¬èª", minRead:"min read",
        // Calendar texts
        calTitle:"Community Calendar & Business Days",
        calLegend:"Legend",
        calOpen:"Open", calClosed:"Closed", calHoliday:"Holiday", calNoEvents:"No events",
        calEvents:"events",
      },
      JP: {
        brand:"Curiositas",
        nav:[
        {k: "Explore", en: "Explore", jp: "çŸ¥ã‚‹",
          children: [
            { k: "Home", en: "Home", jp: "ãƒ›ãƒ¼ãƒ " },
            { k: "Values", en: "Values", jp: "ä¾¡å€¤è¦³" },
            { k: "Stories", en: "Stories", jp: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼" },
            { k: "Gallery", en: "Gallery", jp: "ã‚®ãƒ£ãƒ©ãƒªãƒ¼" }
          ]
        },
        {
          k: "Experience", en: "Experience", jp: "ä½“é¨“",
          children: [
            { k: "Cafe", en: "Cafe", jp: "ã‚«ãƒ•ã‚§" },
            { k: "Garden", en: "Garden", jp: "åº­ãƒ»ç•‘" },
            { k: "Spaces", en: "Spaces", jp: "ã‚¹ãƒšãƒ¼ã‚¹" },
            { k: "Programs", en: "Programs", jp: "ãƒ—ãƒ­ã‚°ãƒ©ãƒ " },
            { k: "Events", en: "Events", jp: "ã‚¤ãƒ™ãƒ³ãƒˆ" }
          ]
        },
        {
          k: "Plan", en: "Plan", jp: "è¨ˆç”»",
          children: [
            { k: "Calendar", en: "Calendar", jp: "ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼" },
            { k: "Visit", en: "Visit", jp: "è¨ªå•" }
          ]
        }
        ],
        heroTitle:"ã‚­ãƒ¥ãƒªã‚ªã‚·ã‚¿ã‚¹", heroSub:"äººã¨æ–‡åŒ–ãŒå‡ºä¼šã†å ´æ‰€", heroDesc:"é£Ÿã‚’åˆ†ã‹ã¡ã€åœŸã‚’è€•ã—ã€æ‰‹ã‚’å‹•ã‹ã—ã€æœ¬ã«è¦ªã—ã¿ã€æ³Šã¾ã‚Šã€å­¦ã³åˆã†ï¼ã™ã¹ã¦ã“ã“ã§",
        cta1:"ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¦‹ã‚‹", cta2:"ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«å‚åŠ ",
        welcome:"ç§ãŸã¡ã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã‚ˆã†ã“ã", welcomeSub:"ã‚ãªãŸã®çŸ¥è­˜ãƒ»ã‚¹ã‚­ãƒ«ãƒ»å¥½å¥‡å¿ƒãŒèŠ±å’²ãã¾ã™", welcomeP:"å ´æ‰€ä»¥ä¸Šã®ä½“é¨“ã€‚äººã¨äººãŒã¤ãªãŒã‚Šã€å…±ã«å‰µã£ã¦ã„ãã€Œç”ŸããŸã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ã™ã€‚",
        howItWorks:"ã—ãã¿", visit:"è¨ªå•", experience:"ä½“é¨“", share:"å…±æœ‰", grow:"æˆé•·",
        happening:"ä»Šå¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆ", by:"ä¸»å‚¬", join:"å‚åŠ ã™ã‚‹",
        byTheNumbers:"æ•°å­—ã§è¦‹ã‚‹", communityMembers:"é–¢ä¿‚è€…", monthlyWorkshops:"ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—", gardenHarvests:"æ ½åŸ¹ç¨®é¡", languagesSpoken:"è¨€èª",
        seasonalRhythm:"å­£ç¯€ã®ãƒªã‚ºãƒ ", spring:"æ˜¥", summer:"å¤", autumn:"ç§‹", winter:"å†¬",
        communityVoices:"ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®å£°", interactiveGarden:"åº­ã®åœ°å›³", hoverPlants:"æ¤ç‰©ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’åˆã‚ã›ã¦è©³ç´°ã‚’ç¢ºèª", readyHarvest:"åç©«å¯èƒ½", viewRecipe:"ãƒ¬ã‚·ãƒ”ã‚’è¦‹ã‚‹", ingredients:"ææ–™",
        stickyBooking:"äºˆç´„ã¯ã“ã¡ã‚‰", daysLeft:"æ—¥", hoursLeft:"æ™‚é–“", happeningNow:"é–‹å‚¬ä¸­ï¼",
        backSpaces:"ã‚¹ãƒšãƒ¼ã‚¹ä¸€è¦§ã¸", backEvents:"ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ã¸", backStories:"ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã¸æˆ»ã‚‹",
        recipes:"ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ãƒ¬ã‚·ãƒ”", shareRecipe:"ãƒ¬ã‚·ãƒ”ã‚’å…±æœ‰ã™ã‚‹",
        philosophy:"ç§ãŸã¡ã®ç†å¿µ", philosophyText:"ç§ãŸã¡ã¯ã€å°æ‰€ã§å‡ºä¼šã„ã¾ã™ã€‚<br>æ‰‹ã‚’å‹•ã‹ã—ã¦ã€åˆ»ã‚“ã§ã€ç…®ã¦ã€å‘³è¦‹ã—ã¦ã€‚<br><br>ãƒ¬ã‚·ãƒ”ã¯ã€Œå®Œæˆã•ã‚ŒãŸç­”ãˆã€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>èª°ã‹ã®è¨˜æ†¶ã€æ—…ã®é€”ä¸­ã®å·¥å¤«ã€<br>ã¾ãªæ¿ã®ä¸Šã§äº¤ã‚ã•ã‚Œã‚‹å°ã•ãªç‰©èªã§ã™ã€‚<br><br>ãã‚Œã¯å›ºå®šã•ã‚ŒãŸã‚‚ã®ã§ã¯ãªãã€<br>äººãŒå¤‰ã‚ã‚Šã€å­£ç¯€ãŒç§»ã‚Šã€ææ–™ãŒå¤‰ã‚ã‚‹ãŸã³ã«ã€<br>å°‘ã—ãšã¤å§¿ã‚’å¤‰ãˆã¦ã„ãã¾ã™ã€‚<br><br>æ¯æ—¥æ–™ç†ã‚’ã™ã‚‹äººã‚‚ã€ä»Šæ—¥ãŒã¯ã˜ã‚ã¦ã®äººã‚‚ã€<br>å­ã©ã‚‚ã‚‚ã€æ—…äººã‚‚ã€è¿‘æ‰€ã®äººã‚‚ã€<br>åŒã˜ãƒ†ãƒ¼ãƒ–ãƒ«ã«é›†ã„ã¾ã™ã€‚<br><br>æ–‡åŒ–ãŒé‡ãªã‚Šã€è¨˜æ†¶ãŒã‚ˆã¿ãŒãˆã‚Šã€<br>æ°—ã¥ããŒãã£ã¨ç¾ã‚Œã‚‹å ´æ‰€ã€‚<br><br>ã“ã“ã§ã®ã€Œé£Ÿã€ã¯ã€ãŸã ãŠè…¹ã‚’æº€ãŸã™ãŸã‚ã®ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>æ™‚é–“ã¨ã€æ‰‹é–“ã¨ã€ç¬‘ã„å£°ã¨ã€ã‚„ã•ã—ã•ã‚’<br>åˆ†ã‹ã¡åˆã†ãŸã‚ã®è¨€èªã§ã™ã€‚<br><br>ã€Œã‚‚ã†å°‘ã—èª¿å‘³æ–™ã‚’ã€<br>ã€Œç§ã®æ•…éƒ·ã§ã¯ã“ã†ã™ã‚‹ã‚ˆã€<br>ãã‚“ãªã‚„ã‚Šã¨ã‚ŠãŒã€å­£ç¯€ã®å‘³ã‚ã„ã‚’ã¤ãã‚Šã¾ã™ã€‚<br><br>ã™ã¹ã¦ã®é›†ã¾ã‚Šã¯å°ã•ãªãŠç¥ã„ã§ã™ã€‚<br>å­£ç¯€ã¨ã€éš£äººã¨ã€<br>ã„ã¾ã“ã“ã«ã„ã‚‹ã“ã¨ãã®ã‚‚ã®ã«ã€‚",
        cafeTitle:"ã‚«ãƒ•ã‚§ï¼†ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚­ãƒƒãƒãƒ³", cafeSub:"ãƒ¬ã‚·ãƒ”ã‚’å…±æœ‰ã—ã€é£Ÿäº‹ãŒç§ãŸã¡ã‚’çµã³ã¤ã‘ã‚‹",
        eventsCal:"ã‚¤ãƒ™ãƒ³ãƒˆï¼†ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼", eventsSub:"ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚„é›†ã„ã«å‚åŠ ã—ã‚ˆã†", date:"æ—¥æ™‚:", time:"æ™‚é–“:", capacity:"å®šå“¡:", reserve:"äºˆç´„ã™ã‚‹",
        hostEventQ:"ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä¸»å‚¬ã—ãŸã„ï¼Ÿ", hostEventP:"ã‚ãªãŸã®ã‚¹ã‚­ãƒ«ã¨æƒ…ç†±ã‚’ã‚·ã‚§ã‚¢ã—ã‚ˆã†", propose:"ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚’ææ¡ˆ",
        spacesTitle:"ç§ãŸã¡ã®ã‚¹ãƒšãƒ¼ã‚¹", spacesSub:"ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®å®¶ã®å„ã‚¨ãƒªã‚¢ã‚’æ¢ç´¢",
        valuesTitle:"æ•™è‚²ã¨ä¾¡å€¤è¦³", valuesSub:"å¥½å¥‡å¿ƒãƒ»å‰µé€ åŠ›ãƒ»æ€ã„ã‚„ã‚Šãƒ»å”åƒ", valueDesc:(v)=>`${v}ãŒäººã¨åœ°çƒã‚’ã©ã†ã¤ãªãã‹æ¢æ±‚ã™ã‚‹`,
        storiesTitle:"ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚¹ãƒˆãƒ¼ãƒªãƒ¼", storiesSub:"ãƒ¡ãƒ³ãƒãƒ¼ã®å£°ã¨å®Ÿè·µ", readMore:"èª­ã‚€",
        programsTitle:"ãƒ—ãƒ­ã‚°ãƒ©ãƒ ", programsSub:"èª°ã§ã‚‚æ•™ãˆã‚‰ã‚Œã€èª°ã§ã‚‚å­¦ã¹ã‚‹ç’°å¢ƒ",
        galleryTitle:"ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚®ãƒ£ãƒ©ãƒªãƒ¼", gallerySub:"ä½•æ°—ãªã„æ™‚é–“ã®ä¸­ã§ã€äººç”Ÿã¯é€²ã‚“ã§ã„ã",
        gardenTitle:"è¾²åœ’ï¼†åº­", gardenSub:"é£Ÿãƒ»çŸ¥è­˜ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’ä¸€ç·’ã«è‚²ã¦ã‚‹", growing:"è‚²ã¦ã¦ã„ã‚‹ã‚‚ã®", involved:"å‚åŠ æ–¹æ³•", sustain:"æŒç¶šå¯èƒ½æ€§",
        visitUs:"è¨ªå•ã™ã‚‹", visitSub:"ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’ç›´æ¥ä½“é¨“ã—ã‚ˆã†", location:"å ´æ‰€", hours:"å–¶æ¥­æ™‚é–“", contact:"é€£çµ¡å…ˆ", sendInquiry:"ãŠå•ã„åˆã‚ã›",
        firstGuide:"åˆã‚ã¦ã®è¨ªå•ã‚¬ã‚¤ãƒ‰", step1:"ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ç¢ºèª", step2:"ã‚³ãƒ¼ãƒ’ãƒ¼ã¨ä¼šè©±ã‚’æ¥½ã—ã‚€", step3:"ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚„æ´»å‹•ã«å‚åŠ ", step4:"ãƒ¡ãƒ³ãƒãƒ¼ã«ä¼šã„ã€è²¢çŒ®ã®å½¢ã‚’ç™ºè¦‹", step5:"æˆé•·ã™ã‚‹ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ä¸€å“¡ã«ï¼",
        langToggle:"English", minRead:"åˆ†",
        // Calendar texts
        calTitle:"ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆï¼†å–¶æ¥­æ—¥ï¼‰",
        calLegend:"å‡¡ä¾‹",
        calOpen:"å–¶æ¥­", calClosed:"ä¼‘æ¥­", calHoliday:"ç¥æ—¥", calNoEvents:"ã‚¤ãƒ™ãƒ³ãƒˆãªã—",
        calEvents:"ä»¶",
      }
    };

// Helpers
function labelOf(node){ return (lang === 'EN' ? node.en : node.jp); }
  function groups(){ return dict[lang].nav; } // convenience

  // Simple router hook (replace with your real router)
  function navigate(key){
    // e.g., swap view, pushState, or call your existing view loader
    console.log("navigate ->", key);
    loadPage && loadPage(key); // if you have a loader
  }

  // --- Desktop: top-level groups with hover dropdown
  function labelOf(node){ return (lang==='EN' ? node.en : node.jp); }

  function renderDesktopNav(){
    const root = document.getElementById('desktopNav');
    if(!root) return;

    const groups = (dict[lang] && dict[lang].nav) ? dict[lang].nav : [];
    root.innerHTML = groups.map(group => {
      const items = (group.children || []).map(item => {
        return `
          <button
            class="block w-full text-left px-3 py-2 rounded hover:bg-[var(--warm-beige)]/60"
            onclick="navigate('${item.k}')"
          >
            ${labelOf(item)}
          </button>`;
      }).join('');

      return `
        <div class="relative group/nav">
          <button
            class="px-2 py-2 font-medium hover:text-[var(--forest-green)] focus:outline-none"
            aria-haspopup="true"
            aria-expanded="false"
          >
            ${labelOf(group)}
          </button>

          <!-- Dropdown panel -->
          <div
            class="absolute left-0 top-full mt-2 w-56 rounded-xl border bg-white shadow-lg p-2
                  opacity-0 invisible translate-y-1 transition
                  group-hover/nav:opacity-100 group-hover/nav:visible group-hover/nav:translate-y-0
                  group-focus-within/nav:opacity-100 group-focus-within/nav:visible group-focus-within/nav:translate-y-0 z-50"
            style="border-color: var(--warm-beige);"
          >
            ${items}
          </div>
        </div>`;
    }).join('');

    // Accessibility nicety: reflect expanded state
    root.querySelectorAll('.group\\/nav > button').forEach(btn=>{
      const wrap = btn.parentElement;
      const panel = wrap.querySelector('div[role!="menu"]'); // our panel

      const setExpanded = (v)=> btn.setAttribute('aria-expanded', v ? 'true' : 'false');

      wrap.addEventListener('mouseenter', ()=> setExpanded(true));
      wrap.addEventListener('mouseleave', ()=> setExpanded(false));
      btn.addEventListener('focus', ()=> setExpanded(true));
      btn.addEventListener('blur', ()=> setExpanded(false));
      panel && panel.addEventListener('focusin', ()=> setExpanded(true));
      panel && panel.addEventListener('focusout', (e)=>{
        if(!panel.contains(e.relatedTarget)) setExpanded(false);
      });
    });
  }

  // --- Mobile: grid of groups; tapping a group toggles its children
  function renderMobileNav(){
    const wrap = document.getElementById('mobileNavWrap');
    const root = document.getElementById('mobileNav');
    if(!root) return;

    root.innerHTML = groups().map((group, idx) => {
      const gid = `mgrp-${idx}`;
      const children = (group.children || []).map(item =>
        `<button class="text-left px-3 py-2 rounded border border-[var(--warm-beige)] hover:bg-[var(--warm-beige)]/60"
                 onclick="navigate('${item.k}')">${labelOf(item)}</button>`
      ).join('');

      return `
        <div class="col-span-2 border rounded-xl p-3" style="border-color:var(--warm-beige);">
          <button class="w-full flex items-center justify-between text-left font-medium"
                  aria-controls="${gid}" aria-expanded="false"
                  onclick="toggleMobileGroup('${gid}', this)">
            <span>${labelOf(group)}</span>
            <span class="ml-3">â–¾</span>
          </button>
          <div id="${gid}" class="mt-2 hidden grid grid-cols-1 gap-2">
            ${children}
          </div>
        </div>
      `;
    }).join('');

    // wire hamburger
    const toggle = document.getElementById('menuToggle');
    if(toggle && wrap){
      toggle.onclick = () => {
        const open = wrap.classList.toggle('hidden') === false;
        toggle.setAttribute('aria-expanded', String(open));
      };
    }
  }

  function toggleMobileGroup(id, btn){
    const el = document.getElementById(id);
    if(!el) return;
    const nowOpen = el.classList.toggle('hidden') === false;
    btn.setAttribute('aria-expanded', String(nowOpen));
  }

  // --- Language switch should re-render both navs
  function rerenderNav(){
    renderDesktopNav();
    renderMobileNav();
  }

  // Optional: basic keyboard/escape for desktop dropdowns
  function setupDesktopNavA11y(){
    const root = document.getElementById('desktopNav');
    if(!root) return;
    root.addEventListener('keydown', (e) => {
      if(e.key === 'Escape'){
        // blur to close group-hover via focus-within
        const el = document.activeElement;
        el && el.blur && el.blur();
      }
    });
  }

  // Initial render (call once after dict/lang boot)
  document.addEventListener('DOMContentLoaded', () => {
    renderDesktopNav();
    renderMobileNav();
    setupDesktopNavA11y();
  });

  // Example: if you already have a lang button, call rerenderNav() after toggling
  const langBtnSm = document.getElementById('langBtnSm');
  if(langBtnSm){
    langBtnSm.addEventListener('click', () => {
      lang = (lang === 'EN' ? 'JP' : 'EN');
      langBtnSm.textContent = (lang === 'EN' ? 'æ—¥æœ¬èª' : 'English');
      rerenderNav();
    });
  }

    /* Content data */
/* CafÃ© / Kitchen photo set (use your own images if you like) */
const PHILO_IMAGES = [
  imgUrl("images/Cafe1.jpg"),
  imgUrl("https://images.unsplash.com/photo-1526318472351-c75fcf070305"),
  imgUrl("https://images.unsplash.com/photo-1504754524776-8f4f37790ca0"),
  imgUrl("https://images.unsplash.com/photo-1512621776951-a57141f2eefd"),
  imgUrl("https://images.unsplash.com/photo-1498654896293-37aacf113fd9"),
  imgUrl("images/Cafe2.jpg"),
  imgUrl("images/Cafe3.jpg"),
  imgUrl("images/Cafe4.jpg")
];

// Split the master list into two disjoint sets (even/odd)
const [PHILO_TOP, PHILO_BOTTOM] = (() => {
  const top = [], bottom = [];
  PHILO_IMAGES.forEach((src, i) => (i % 2 ? bottom : top).push(src));
  return [top, bottom];
})();

    /* ================== EVENTS ================== */
const eventList = [
  /* ---------- CAFE / KITCHEN ---------- */
  {
    date:{day:"16", mon:"NOV", full:"2025-11-16T11:00:00"},
    cat:"Cooking",
    kind:"special",
    titleEN:"Autumn Harvest Feast: From Garden to Table",
    titleJP:"ç§‹ã®åç©«ã”ã¯ã‚“ï¼šç•‘ã‹ã‚‰é£Ÿå“ã¸",
    hostEN:"Yuki Sasaki & Taro Sakamoto",
    hostJP:"ä½ã€…æœ¨ç”±ç´€ãƒ»å‚æœ¬å¤ªæœ—",
    time:"10:00â€“16:00",
    capacity:18,
    img: imgUrl("images/Harvest.jpg"),
    descEN:"Transform fresh garden produce into a seasonal feast. We'll prepare ferments, hearty stews, and edible flowers together, then gather for a communal long-table meal.",
    descJP:"ç•‘ã§æ¡ã‚ŒãŸé‡èœã‚’å­£ç¯€ã®æ–™ç†ã«ã€‚ç™ºé…µé£Ÿãƒ»ç…®è¾¼ã¿ãƒ»ã‚¨ãƒ‡ã‚£ãƒ–ãƒ«ãƒ•ãƒ©ãƒ¯ãƒ¼ã‚’ã¿ã‚“ãªã§æº–å‚™ã—ã¦ã€é•·ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å›²ã‚“ã§é ‚ãã¾ã™ã€‚",
    bulletsEN:["Morning harvest walk in the garden","Cook in small rotating teams (prep, ferment station, stove)","Set the long table together & share the feast"],
    bulletsJP:["ç•‘ã‚’æ­©ã„ã¦åç©«ï¼ˆåˆå‰ä¸­ï¼‰","ä¸‹ã”ã—ã‚‰ãˆãƒ»ç™ºé…µãƒ»ç«å…¥ã‚Œãƒ»ç››ã‚Šä»˜ã‘","ã¿ã‚“ãªã§ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã¨ã¨ã®ãˆã¦ã€ã”ã¡ãã†ã‚’å›²ã‚€"]
  },
  {
    date:{day:"14", mon:"DEC", full:"2025-12-14T10:00:00"},
    cat:"Cooking",
    kind:"recurring",
    recurEN:"Every 2nd Sunday",
    recurJP:"æ¯æœˆç¬¬2æ—¥æ›œ",
    titleEN:"Ingredient Rescue Party: Give Forgotten Foods New Life",
    titleJP:"çœ ã£ã¦ã„ã‚‹é£Ÿæã‚’æ•‘æ¸ˆã—ã‚ˆã†ï¼šãƒ†ãƒ¼ãƒåˆ¥ã‚µãƒ«ãƒ™ãƒ¼ã‚¸ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼",
    hostEN:"Community Kitchen Team",
    hostJP:"ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚­ãƒƒãƒãƒ³å‚åŠ è€…",
    time:"11:00â€“14:00",
    capacity:16,
    img: imgUrl("https://images.unsplash.com/photo-1490818387583-1baba5e638af?auto=format&fit=crop&w=1200&q=80"),
    descEN:"Bring a neglected ingredient from your pantry. Together we'll experiment with flavors, reduce waste, and create new family favorites.",
    descJP:"æ£šã®å¥¥ã§çœ ã£ã¦ã„ã‚‹é£Ÿæã‚’ä¸€ã¤æŒã¡å¯„ã£ã¦ã€‚ã¿ã‚“ãªã§å‘³ã‚’æ¢æ±‚ã—ãªãŒã‚‰ã€ãƒ•ãƒ¼ãƒ‰ãƒ­ã‚¹ã‚’æ¸›ã‚‰ã—ã€æ–°ã—ã„å®šç•ªæ–™ç†ã‚’ç™ºè¦‹ã—ã¾ã™ã€‚",
    bulletsEN:["Share the story behind your ingredient","Brainstorm & cook in small teams","Taste, learn, take recipes home"],
    bulletsJP:["æŒã¡å¯„ã£ãŸé£Ÿæã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’å…±æœ‰","å°ã‚°ãƒ«ãƒ¼ãƒ—ã§ã‚¢ã‚¤ãƒ‡ã‚¢å‡ºã—ï¼†èª¿ç†","é£Ÿäº‹ãƒ»å­¦ã³ãƒ»ãƒ¬ã‚·ãƒ”ã‚’æŒã¡å¸°ã‚‹"]
  },
  {
    date:{day:"18", mon:"JAN", full:"2026-01-18T18:30:00"},
    cat:"Cooking",
    kind:"recurring",
    recurEN:"Monthly Book & Soup Night",
    recurJP:"æ¯æœˆé–‹å‚¬ãƒ»æœ¬ã¨ã‚¹ãƒ¼ãƒ—ã®å¤œ",
    titleEN:"Book & Soup: Winter Stories by the Fire",
    titleJP:"æœ¬ã¨ã‚¹ãƒ¼ãƒ—ï¼šå†¬ã®å¤œã®ç‰©èªä¼š",
    hostEN:"Fatima Benali & Clara MÃ¼ller",
    hostJP:"ãƒ•ã‚¡ãƒ†ã‚£ãƒãƒ»ãƒ™ãƒŠãƒª & ã‚¯ãƒ©ãƒ©ãƒ»ãƒŸãƒ¥ãƒ¼ãƒ©ãƒ¼",
    time:"18:30â€“20:30",
    capacity:20,
    img: imgUrl("images/Reading.jpg"),
    descEN:"An evening of short readings, warm soup, and gentle conversation. Bring a favorite passage, listen to others, and share thoughts when you're ready.",
    descJP:"çŸ­ã„æœ—èª­ã¨ã‚ãŸãŸã‹ã„ã‚¹ãƒ¼ãƒ—ã¨ã€ã‚„ã•ã—ã„å¯¾è©±ã®å¤œã€‚å¥½ããªä¸€ç¯€ã‚’æŒã¡å¯„ã£ã¦ã€è€³ã‚’å‚¾ã‘ã¦ã€è©±ã—ãŸããªã£ãŸã‚‰è©±ã™ã€ã‚†ã£ãŸã‚Šãªä¼šã€‚",
    bulletsEN:["Arrive, choose your soup, settle in","Reading circle: share short memorable passages","Open conversation & reflection time"],
    bulletsJP:["ã‚¹ãƒ¼ãƒ—ã‚’é¸ã‚“ã§ã€ã‚†ã£ãã‚Šç€å¸­","æœ—èª­ã®è¼ªï¼šå°è±¡çš„ãªä¸€ç¯€ã‚’å…±æœ‰","è‡ªç”±ãªå¯¾è©±ã¨æŒ¯ã‚Šè¿”ã‚Šã®æ™‚é–“"]
  },

  /* ---------- GARDEN ---------- */
  {
    date:{day:"30", mon:"NOV", full:"2025-11-30T09:30:00"},
    cat:"Garden",
    kind:"special",
    titleEN:"Regenerative Planting Lab: Soil First",
    titleJP:"å†ç”Ÿè¾²æ¥­ãƒ»æ¤ãˆä»˜ã‘ãƒ©ãƒœï¼šã¾ãšã¯åœŸã‹ã‚‰",
    hostEN:"Hiroshi Nakagawa",
    hostJP:"ä¸­æ¾¤å®å¿—",
    time:"09:30â€“12:00",
    capacity:14,
    img: imgUrl("https://images.unsplash.com/photo-1461354464878-ad92f492a5a0?auto=format&fit=crop&w=1200&q=80"),
    descEN:"A hands-on workshop focused on creating healthy soil beds that support long-term growth. Weâ€™ll explore cover crops, companion planting, and simple soil observations â€” and youâ€™ll leave with a mini planting plan you can apply at home.",
    descJP:"ç•‘ã¥ãã‚Šã®è¦ã§ã‚ã‚‹ã€ŒåœŸã€ã«ã˜ã£ãã‚Šå‘ãåˆã†å®Ÿè·µå›ã§ã™ã€‚è¢«è¦†ä½œç‰©ï¼ˆã‚«ãƒãƒ¼ã‚¯ãƒ­ãƒƒãƒ—ï¼‰ã‚„ç›¸æ€§ã®è‰¯ã„æ¤ç‰©ã®çµ„ã¿åˆã‚ã›ã‚’è©¦ã—ãªãŒã‚‰ã€åœŸã®æ‰‹è§¦ã‚Šãƒ»å‘¼å¸ãƒ»çŠ¶æ…‹ã‚’ä¸€ç·’ã«è¦³å¯Ÿã—ã¾ã™ã€‚æœ€å¾Œã«ã¯ã€è‡ªåˆ†ã®å°ã•ãªç•‘ã®æ¤ãˆä»˜ã‘è¨ˆç”»ã‚’æŒã¡å¸°ã‚Œã¾ã™ã€‚",
    bulletsEN:["Bed preparation & layering","Quick soil feel & structure test","Cover crop and companion planting practice","Create your own small-plot plan"],
    bulletsJP:["ç•ã¨åœŸã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¥ãã‚Š","åœŸã®æ‰‹è§¦ã‚Šã¨çŠ¶æ…‹ã®ç°¡å˜ãƒã‚§ãƒƒã‚¯","ã‚«ãƒãƒ¼ã‚¯ãƒ­ãƒƒãƒ—ã¨ã‚³ãƒ³ãƒ‘ãƒ‹ã‚ªãƒ³ã®çµ„ã¿åˆã‚ã›å®Ÿè·µ","è‡ªåˆ†ç”¨ã®ãƒŸãƒ‹ç•‘ãƒ—ãƒ©ãƒ³ã‚’ä½œæˆ"]
  },
  {
    date:{day:"21", mon:"DEC", full:"2025-12-21T13:00:00"},
    cat:"Garden",
    kind:"recurring",
    recurEN:"Every 3rd Sunday",
    recurJP:"æ¯æœˆç¬¬3æ—¥æ›œ",
    titleEN:"Compost Area: From Scraps to Soil",
    titleJP:"ã‚³ãƒ³ãƒã‚¹ãƒˆã‚¹ãƒšãƒ¼ã‚¹ï¼šç•‘ãƒ»ã‚­ãƒƒãƒãƒ³ã®æ®‹ã•ã‹ã‚‰åœŸã¸",
    hostEN:"Garden Crew",
    hostJP:"ã‚¬ãƒ¼ãƒ‡ãƒ³ãƒãƒ¼ãƒ ",
    time:"13:00â€“15:00",
    capacity:24,
    img: imgUrl("images/Compost.jpg"),
    descEN:"A monthly hands-on compost session. We build and turn piles, check heat, observe microbial activity, and harvest finished compost when ready. Kids help track the cycleâ€”it's a slow transformation we witness together.",
    descJP:"æ¯æœˆé–‹å‚¬ã®ã‚³ãƒ³ãƒã‚¹ãƒˆå®Ÿè·µå›ã€‚å±±ã‚’ã¤ãã‚Šã€åˆ‡ã‚Šè¿”ã—ã€æ¸©åº¦ã¨ç™ºé…µã®é€²ã¿ã‚’è¦³å¯Ÿã—ãªãŒã‚‰ã€ç†Ÿæˆã—ãŸåœŸã‚’åç©«ã—ã¾ã™ã€‚æ®‹ã•ãŒã‚†ã£ãã‚Šã¨åœŸã¸ã¨å¤‰ã‚ã£ã¦ã„ãéç¨‹ã‚’ã€ã¿ã‚“ãªã§è¦‹å®ˆã‚‹æ™‚é–“ã§ã™ã€‚",
    bulletsEN:["Bring clean veggie scraps","How to log temperature and moisture","Sifting finished compost into usable soil"],
    bulletsJP:["é‡èœããš(ç”Ÿ)ã‚’æŒå‚OK","æ¸©åº¦ãƒ­ã‚°ã®ä»˜ã‘æ–¹","ãµã‚‹ã„ã§ä»•ä¸Šã’ã‚‹â€œåœŸã®ä¼šâ€"]
  },
  {
    date:{day:"11", mon:"JAN", full:"2026-01-11T10:00:00"},
    cat:"Garden",
    kind:"special",
    titleEN:"Drying Lab: Fruits, Beans & Winter Herbs",
    titleJP:"è‡ªç„¶ä¹¾ç‡¥ï¼šæœç‰©ãƒ»è±†ãƒ»å†¬ã®ãƒãƒ¼ãƒ–",
    hostEN:"Jean-Pierre Laurent & Noah Kim",
    hostJP:"ã‚¸ãƒ§ãƒ³ãƒ»ãƒ”ã‚¨ãƒ¼ãƒ«ãƒ»ãƒ­ãƒ¼ãƒ©ãƒ³ & ã‚­ãƒ ãƒ»ãƒã‚¢",
    time:"10:00â€“12:30",
    capacity:15,
    img: imgUrl("images/Drying.jpg"),
    descEN:"Explore different drying methods: sun, airflow, and low-heat techniques. Weâ€™ll flavor with citrus peels and herbs, then pack your own seasonal snack jars to take home.",
    descJP:"å¤©æ—¥ãƒ»é€é¢¨ãƒ»ä½æ¸©ä¹¾ç‡¥ã®é•ã„ã‚’æ¯”ã¹ãªãŒã‚‰ã€æŸ‘æ©˜ãƒ”ãƒ¼ãƒ«ã‚„ãƒãƒ¼ãƒ–ã§é¦™ã‚Šã‚’ã¤ã‘ã¾ã™ã€‚ä»•ä¸Šã’ã¯ã€Œå†¬ã®ãŠã‚„ã¤ç“¶ã€ã‚’ã¤ãã£ã¦ãŠæŒã¡å¸°ã‚Šã€‚",
    bulletsEN:["Low-heat oven setup","Dehydrator alternatives","Labeling and storage for long winter keeping"],
    bulletsJP:["ä½æ¸©ã‚ªãƒ¼ãƒ–ãƒ³ã®è¨­å®š","ä»£ç”¨ã§ãã‚‹ä¹¾ç‡¥æ–¹æ³•","ãƒ©ãƒ™ãƒ«ã¨ä¿å­˜ã®ã‚³ãƒ„"]
  },

  /* ---------- CRAFT ---------- */
  {
    date:{day:"07", mon:"DEC", full:"2025-12-07T13:30:00"},
    cat:"Craft",
    kind:"special",
    titleEN:"Seasonal Vision Board (Analog + Tiny Digital)",
    titleJP:"å­£ç¯€ã®ãƒ“ã‚¸ãƒ§ãƒ³ãƒœãƒ¼ãƒ‰ï¼ˆæ‰‹ä½œã‚Šï¼‹ãƒ‡ã‚¸ã‚¿ãƒ«åŒ–ï¼‰",
    hostEN:"Elena Rossi",
    hostJP:"ã‚¨ãƒ¬ãƒŠãƒ»ãƒ­ãƒƒã‚·",
    time:"13:30â€“16:30",
    capacity:14,
    img: imgUrl("images/VisionBoard.jpg"),
    descEN:"Slow collage time with magazines, textures, and color swatches. Optionally scan or photograph your board to turn it into a mini phone wallpaper.",
    descJP:"é›‘èªŒã‚„ç´™ç‰‡ã‚’åˆ‡ã£ã¦ãƒ»é‡ã­ã¦ãƒ»è²¼ã‚‹ã‚†ã£ãã‚Šã—ãŸæ™‚é–“ã€‚å®Œæˆã—ãŸãƒœãƒ¼ãƒ‰ã¯æ’®å½±ã—ã¦ã€ã‚¹ãƒãƒ›ç”¨ã®å°ã•ãªå£ç´™ã«ã‚‚ã§ãã¾ã™ã€‚",
    bulletsEN:["All tools & paper provided","Mindful prompt cards","Export your board as a phone wallpaper"],
    bulletsJP:["é“å…·ãƒ»ç´ æã¯ã™ã¹ã¦æº–å‚™ã‚ã‚Š","å¿ƒã‚’æ•´ãˆã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚«ãƒ¼ãƒ‰","ã‚¹ãƒãƒ›å£ç´™ã¸ã®å¤‰æ›ã‚µãƒãƒ¼ãƒˆ"]
  },
  {
    date:{day:"20", mon:"DEC", full:"2025-12-20T10:00:00"},
    cat:"Craft",
    kind:"recurring",
    recurEN:"Every 3rd Saturday",
    recurJP:"æ¯æœˆç¬¬3åœŸæ›œ",
    titleEN:"Natural Dyeing with Garden Plants",
    titleJP:"åº­ã®æ¤ç‰©ã§è‡ªç„¶æŸ“ã‚",
    hostEN:"Craft Studio",
    hostJP:"ã‚¯ãƒ©ãƒ•ãƒˆã‚¹ã‚¿ã‚¸ã‚ª",
    time:"10:00â€“13:00",
    capacity:12,
    img: imgUrl("images/Dyeing.jpg"),
    descEN:"Experiment with onion skins, avocado pits, persimmon peel dye, and winter herbs. Bring a small cotton item to dye. Weâ€™ll explore gentle mordants and notice how colors deepen as they rest through the season.",
    descJP:"ç‰ã­ãã®çš®ã€ã‚¢ãƒœã‚«ãƒ‰ã®ç¨®ã€æŸ¿ã®çš®ã®æŸ“æ¶²ã€åº­ã®å†¬ãƒãƒ¼ãƒ–ã§æŸ“ã‚ã®å®Ÿé¨“ã‚’ã—ã¾ã™ã€‚å°ã•ãªã‚³ãƒƒãƒˆãƒ³è£½å“ã‚’ã”æŒå‚ãã ã•ã„ã€‚åª’æŸ“ã¨ã€æ™‚é–“ã¨ã¨ã‚‚ã«ã€Œè‰²ãŒè‚²ã¤ã€æ„Ÿè¦šã‚’å‘³ã‚ã„ã¾ã™ã€‚",
    bulletsEN:["Warm extraction & simmering techniques","Gentle mordants (alum & soy milk base)","Swatch cards for seasonal color notes"],
    bulletsJP:["å¼±ç«ã§ã˜ã£ãã‚ŠæŠ½å‡ºã™ã‚‹æ–¹æ³•","ã‚„ã•ã—ã„åª’æŸ“ï¼ˆãƒŸãƒ§ã‚¦ãƒãƒ³ãƒ»è±†ä¹³ä¸‹åœ°ï¼‰","å­£ç¯€ã®è‰²ã‚’è¨˜éŒ²ã™ã‚‹ã‚¹ãƒ¯ãƒƒãƒã‚«ãƒ¼ãƒ‰"]
  },
  {
    date:{day:"25", mon:"JAN", full:"2026-01-25T14:00:00"},
    cat:"Craft",
    kind:"special",
    titleEN:"Botanical Candles + Winter Moisturizer",
    titleJP:"ãƒœã‚¿ãƒ‹ã‚«ãƒ«ã‚­ãƒ£ãƒ³ãƒ‰ãƒ«ã¨å†¬ã®ä¿æ¹¿ã‚¯ãƒªãƒ¼ãƒ ",
    hostEN:"Zara Ahmed & MarÃ­a LÃ³pez",
    hostJP:"ã‚¶ãƒ©ãƒ»ã‚¢ãƒ¡ãƒƒãƒ‰ & ãƒãƒªã‚¢ãƒ»ãƒ­ãƒšã‚º",
    time:"14:00â€“17:00",
    capacity:16,
    img: imgUrl("https://images.unsplash.com/photo-1556760544-74068565f05c?auto=format&fit=crop&w=1200&q=80"),
    descEN:"Pour floral botanical candles and blend a simple winter balm using beeswax and garden herbs. A fragrant workshop perfect for gifting season.",
    descJP:"èŠ±ã‚„ãƒãƒ¼ãƒ–ã‚’ä½¿ã£ãŸãƒœã‚¿ãƒ‹ã‚«ãƒ«ã‚­ãƒ£ãƒ³ãƒ‰ãƒ«ã‚’æµã—è¾¼ã¿ã€ãƒŸãƒ„ãƒ­ã‚¦ã¨åº­ã®ãƒãƒ¼ãƒ–ã§å†¬ã®ä¿æ¹¿ãƒãƒ¼ãƒ ã‚’ã¤ãã‚Šã¾ã™ã€‚è´ˆã‚Šç‰©ã«ã‚‚ã´ã£ãŸã‚Šã€‚",
    bulletsEN:["Wick setting & pour technique","Scent pairing and seasonal tones","Labeling & gift wrapping"],
    bulletsJP:["èŠ¯ã®æ‰±ã„ã¨æ³¨ãæ–¹","é¦™ã‚Šã®çµ„ã¿åˆã‚ã›ã®åŸºç¤","ãƒ©ãƒ™ãƒ«ã¨ã‚®ãƒ•ãƒˆåŒ…è£…ã‚³ãƒ¼ãƒŠãƒ¼"]
  },

  /* ---------- EXAMPLE PAST EVENT (kept for archive) ---------- */
  {
    date:{day:"29", mon:"OCT", full:"2025-10-29T13:00:00"},
    cat:"Craft",
    kind:"special",
    titleEN:"(Past) Garden Pressed-Leaf Zines",
    titleJP:"ã€çµ‚äº†ã€‘è‘‰ã£ã±ã®ãƒ—ãƒ¬ã‚¹ã§ã¤ãã‚‹ZINE",
    hostEN:"Natsuko Mori",
    hostJP:"æ£®å¤å­",
    time:"13:00â€“15:30",
    capacity:12,
    img: imgUrl("images/Zine.jpg"),
    descEN:"We pressed autumn leaves into tiny story zines and traded them.",
    descJP:"ç§‹ã®è‘‰ã‚’å°ã•ãªç‰©èªã®ZINEã«ãƒ—ãƒ¬ã‚¹ã—ã¦äº¤æ›ã—ã¾ã—ãŸã€‚",
    bulletsEN:["Leaf pressing","Simple saddle stitch","Zine swap"],
    bulletsJP:["è‘‰ã®ãƒ—ãƒ¬ã‚¹","ç°¡å˜ãªä¸­ç¶´ã˜","ZINEäº¤æ›ä¼š"]
  }
];

    const spaces = [
  {
    key: "Cafe",
    title: "CafÃ© & Kitchen",
    color: "#A9825A",
    hero: "images/Cafe.jpg",
    // Card teaser (short)
    cardDescEN: "Dive into the wonders of food, flavor, and connection.",
    cardDescJP: "é£Ÿã®å¥¥æ·±ã•ã¨ã¤ãªãŒã‚Šã‚’å‘³ã‚ãŠã†ã€‚",
    // Full page description
    pageDescEN: "Seasonal menus, communal cooking, and conversations that bring joy to the table.",
    pageDescJP: "å­£ç¯€ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€åœ°å…ƒæ–™ç†ã€èª¿ç†ã¨å¯¾è©±ã‚’é€šã—ã¦å–œã³ã‚’å…±æœ‰ã™ã‚‹ã€‚",
    blocks: [
    { hEN: "Seasonal Menu",     hJP: "å­£ç¯€ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼",
      pEN: "Rotating dishes inspired by our garden and partner farms.",
      pJP: "åº­ã‚„ææºè¾²å®¶ã«ç€æƒ³ã‚’å¾—ãŸæ—¥æ›¿ã‚ã‚Šæ–™ç†ã€‚" },
    { hEN: "Community Cooking", hJP: "ã¿ã‚“ãªã®ã‚­ãƒƒãƒãƒ³",
      pEN: "Open-kitchen days where everyone has a small role to play.",
      pJP: "ã‚­ãƒƒãƒãƒ³é–‹æ”¾ã€‚å°ã•ãªå½¹å‰²ã‚’åˆ†ã‘åˆã„ãªãŒã‚‰ã€ä¸€ç·’ã«ä½œã‚Šä¸€ç·’ã«é£Ÿã¹ã‚‹ã€‚" },
    { hEN: "Tea & Dialogue",    hJP: "ãŠèŒ¶ä¼š",
      pEN: "Herbal tea and reading sessions with gentle shared prompts.",
      pJP: "ãƒãƒ¼ãƒ–ãƒ†ã‚£ãƒ¼ã‚’ç‰‡æ‰‹ã«ã€èªã‚Šåˆã†ã²ã¨ã¨ãã€‚" }
    ]
  },
  {
    key: "Garden",
    title: "Farm & Garden",
    color: "#6E8C64",
    hero: "images/Garden.jpg",
    cardDescEN: "Discover how food, nature, and creativity grow together.",
    cardDescJP: "é£Ÿã¹ã‚‹ã“ã¨ã‚‚ã€è‚²ã¦ã‚‹ã“ã¨ã‚‚ã€ã¤ãã‚‹ã“ã¨ã‚‚ã€ã“ã“ã§å…¨éƒ¨ã¤ãªãŒã‚‹ã€‚",
    pageDescEN: "Through seed-saving, composting, and a small garden, we grow soil â†’ food â†’ community.",
    pageDescJP: "ã‚¿ãƒã®ä¿å­˜ã€å †è‚¥ã¥ãã‚Šã€ç™’ã—ã®èœåœ’ã€‚åœŸã‹ã‚‰é£Ÿã€ãã—ã¦ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã€‚",
    blocks: [
    { hEN: "Harvest Calendar", hJP: "åç©«ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼",
      pEN: "An interactive seasonal guide with community shift schedules.",
      pJP: "å­£ç¯€ã”ã¨ã®ä½œæ¥­ã‚„ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®å½¹å‰²ã‚’ã²ã¨ç›®ã§ã€‚" },
    { hEN: "Seed Library",     hJP: "ç¨®ã®å€‰åº«",
      pEN: "Borrow, grow, and return seeds through labeling workshops.",
      pJP: "ã‚¿ãƒã‚’å€Ÿã‚Šã¦è‚²ã¦ã€æ¬¡ã®å­£ç¯€ã«è¿”ã™ã€‚ãƒ©ãƒ™ãƒ«ã¥ãã‚Šã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚‚ã€‚" },
    { hEN: "Compost Area",   hJP: "ã‚³ãƒ³ãƒã‚¹ãƒˆä½œã‚Š",
      pEN: "Transform kitchen scraps into soil; participants help track the cycle.",
      pJP: "å°æ‰€ã®ç”Ÿã”ã¿ã‚’åœŸã¸ã€‚å‚åŠ è€…ãŒå¾ªç’°ã‚’è¨˜éŒ²ã€‚" }
    ]
  },
  {
    key: "Library",
    title: "Library & Workshop",
    color: "#A7C4D6",
    hero: "https://images.unsplash.com/photo-1507842217343-583bb7270b66?auto=format&fit=crop&w=1400&q=80",
    cardDescEN: "A cozy hub of knowledge, creativity, and discovery",
    cardDescJP: "çŸ¥ã¨å‰µé€ ã¨ç™ºè¦‹ãŒã‚ãã‚‹å±…å¿ƒåœ°ã®ã‚ˆã„æ‹ ç‚¹ã€‚",
    pageDescEN: "Reading nooks, craft tables, and a zine shelf â€” where ideas turn into practice.",
    pageDescJP: "èª­æ›¸ã®ã“ã‚‚ã‚Šå¸­ã€æ‰‹ã—ã”ã¨ã®æœºã€ã‚¸ãƒ³æ£šâ€•â€•ç†è«–ã¨å®Ÿè·µãŒè¡Œãäº¤ã†å ´æ‰€ã€‚",
    blocks: [
    { hEN: "Reading Circles", hJP: "ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚µãƒ¼ã‚¯ãƒ«",
      pEN: "Monthly bilingual gatherings around shared themes and reflections.",
      pJP: "æ¯æœˆã€äºŒè¨€èªã§ãƒ†ãƒ¼ãƒã¨ãµã‚Šè¿”ã‚Šã‚’åˆ†ã‹ã¡åˆã†é›†ã„ã€‚" },
    { hEN: "Makersâ€™ Bench",   hJP: "ãƒ¡ã‚¤ã‚«ãƒ¼ã‚ºãƒ»ãƒ™ãƒ³ãƒ",
      pEN: "Producing natural textiles, shaping clay, and crafting with paper.",
      pJP: "å¸ƒã‚’ã¤ãã‚Šã€åœŸã‚’ç·´ã‚Šã€ç´™ã§æ‰‹ã—ã”ã¨ã‚’æ¥½ã—ã‚€ã€‚" },
    { hEN: "Zine Press",      hJP: "ã‚¸ãƒ³ãƒ»ãƒ—ãƒ¬ã‚¹",
      pEN: "Print small magazines to share stories and local wisdom.",
      pJP: "å°ã•ãªå†Šå­ã‚’åˆ·ã£ã¦ã€ç‰©èªã¨ãƒ­ãƒ¼ã‚«ãƒ«ãªçŸ¥æµã‚’å…±æœ‰ã€‚" }
    ]
  }
];

    const stories = [
      {
        key: 0,
        titleEN: "The Art of Slow Living",
        titleJP: "ã‚¹ãƒ­ãƒ¼ãƒªãƒ“ãƒ³ã‚°ã®æŠ€æ³•",
        by: "Visitor",
        minutes: 3,
        img: imgUrl("images/SlowLiving.jpg"),
        bodyEN: `
          The first time I noticed the pace of this place was when I heard the onions.<br>
          Not sizzlingâ€”just breathing in oil. Like a sigh. Long and slow.<br><br>
          I had rushed here from a train that was late, from messages I hadnâ€™t replied to, from a brain that had been sprinting for days. I thought â€œslow livingâ€ was an aesthetic. Linen shirts. Wooden spoons. Sunlight on floors.<br>
          But it was actually justâ€¦ a room where no one was hurrying.<br><br>
          A grandmother sliced carrots with no concern for uniformity. A teenager grated ginger as if it were a secret task. Someone hummed. I donâ€™t know who. It matched the simmering sound.<br><br>
          There were no instructions. No schedule. Just: stay with the thing you're doing.<br><br>
          When we finally ate, nobody said anything profound. Someone just softly laughed into their bowl. I didnâ€™t know why, but I laughed too.<br>
          I didnâ€™t realize until much later that my shoulders had dropped.<br><br>
          <em>Slow living wasnâ€™t a choice. It was something the room lent me. And I accepted.</em>
        `,
        bodyJP: `
          æœ€åˆã«æ°—ã¥ã„ãŸã®ã¯ã€ç‰ã­ãã®éŸ³ã ã£ãŸã€‚<br>
          ã‚¸ãƒ¥ãƒƒã¨æ€¥ã‹ã™éŸ³ã˜ã‚ƒãªãã¦ã€æ²¹ã®ä¸­ã§ã€ãµã†â€¦ã£ã¦æ¯ã‚’ã—ã¦ã„ã‚‹ã¿ãŸã„ãªéŸ³ã€‚<br><br>
          ã“ã“ã¸æ¥ã‚‹å‰ã®ç§ã¯ã€é›»è»Šã«è¿½ã‚ã‚Œã€é€šçŸ¥ã«è¿½ã‚ã‚Œã€ã€Œè€ƒãˆã‚‹å‰ã«åå¿œã™ã‚‹ã€ã¿ãŸã„ãªæ•°æ—¥ã‚’éã”ã—ã¦ã„ãŸã€‚ã‚¹ãƒ­ãƒ¼ãƒªãƒ“ãƒ³ã‚°ãªã‚“ã¦ã€ãŠã—ã‚ƒã‚Œã‚¤ãƒ³ãƒ†ãƒªã‚¢ã®è©±ã ã¨æ€ã£ã¦ãŸã€‚<br>
          ã§ã‚‚ã“ã®éƒ¨å±‹ã¯ã€ãŸã ã€Œèª°ã‚‚æ€¥ã„ã§ã„ãªã„ã€ã ã‘ã®å ´æ‰€ã ã£ãŸã€‚<br><br>
          ãŠã°ã‚ã¡ã‚ƒã‚“ãŒã€åŒ…ä¸ã‚’ã‚†ã£ãã‚Šä¸‹ã‚ã™ã€‚é«˜æ ¡ç”ŸãŒã€ç”Ÿå§œã‚’ã™ã‚ŠãªãŒã‚‰ãƒªã‚ºãƒ ã‚’åˆ»ã‚€ã€‚èª°ã‹ãŒå°ã•ãé¼»æ­Œã‚’æ­Œã£ã¦ã„ã¦ã€ãã‚ŒãŒã˜ã£ãã‚Šç…®ãˆã‚‹éŸ³ã¨ã´ã£ãŸã‚Šåˆã£ã¦ã„ãŸã€‚<br><br>
          æ±ºã¾ã‚Šã‚‚ã€æ®µå–ã‚Šã‚‚ãªã„ã€‚ãŸã ã€è‡ªåˆ†ãŒã„ã¾æ‰‹ã«ã—ã¦ã„ã‚‹ã‚‚ã®ã¨ä¸€ç·’ã«ã„ã‚‹ã ã‘ã€‚<br><br>
          é£Ÿã¹çµ‚ã‚ã£ãŸã¨ãã€èª°ã‹ãŒã€ã»ã£ã¨ç¬‘ã£ãŸã€‚ç†ç”±ã¯ãªã‹ã£ãŸã‘ã©ã€ç§ã‚‚ç¬‘ã£ãŸã€‚<br>
          ã‚ã¨ã§æ°—ã¥ã„ãŸã€‚è‚©ã®åŠ›ãŒã¨ã£ãã«æŠœã‘ã¦ã„ãŸã“ã¨ã«ã€‚<br><br>
          <em>ã€Œã‚¹ãƒ­ãƒ¼ã«ç”Ÿãã‚‹ã€ã¯æ„å¿—ã˜ã‚ƒãªãã¦ã€ã“ã®éƒ¨å±‹ãŒãã£ã¨è²¸ã—ã¦ãã‚ŒãŸçŠ¶æ…‹ã ã£ãŸã€‚</em>
        `,
        quoteEN: "Learning begins where curiosity meets kindness.",
        quoteJP: "å­¦ã³ã¯ã€å¥½å¥‡å¿ƒãŒã‚„ã•ã—ã•ã«å‡ºä¼šã†ã¨ã“ã‚ã‹ã‚‰ã€‚"
      },

      {
        key: 1,
        titleEN: "Seeds of Connection",
        titleJP: "ã¤ãªãŒã‚Šã®ã‚¿ãƒ",
        by: "Volunteer",
        minutes: 3,
        img: imgUrl("images/Seed.jpg"),
        bodyEN: `
          The seed exchange started accidentally. Someone had brought extra shiso seedlings. Someone else had too much mint. I had basil that refused to die.<br>
          We put them on the table.<br><br>
          A quiet manâ€”he always sits near the windowâ€”picked up a tomato seedling and said, almost to himself, â€œMy mother used to grow these.â€<br>
          Everyone heard him. No one intruded. We justâ€¦ made space.<br><br>
          He told us how sheâ€™d tap the sides of seed trays before watering, how she said it was â€œwaking the roots.â€ He demonstrated, gently tapping the table. We watched.<br>
          Then one of the kids tried it. Then everyone did.<br>
          Tap. Tap. Tap.<br><br>
          Ridiculous. Beautiful.<br><br>
          That week the group chat filled with garden updatesâ€”bad soil, new leaves, photos of slanted balcony pots. But mostly:<br>
          â€œI tapped the tray today. Feels like saying good morning.â€<br><br>
          <em>Seeds are supposed to grow in soil. But maybe they grow in stories too.</em>
        `,
        bodyJP: `
          ã‚¿ãƒã®äº¤æ›ä¼šã¯ã€ã‚‚ã¨ã‚‚ã¨äºˆå®šã•ã‚Œã¦ã„ãªã‹ã£ãŸã€‚èª°ã‹ãŒä½™ã£ãŸç´«è˜‡ã®è‹—ã‚’æŒã£ã¦ãã¦ã€åˆ¥ã®èª°ã‹ãŒãƒŸãƒ³ãƒˆã‚’æŠ±ãˆã¦ãã¦ã€ç§ã¯ã€ãªãœã‹ç”Ÿå‘½åŠ›ãŒå¼·ã™ãã‚‹ãƒã‚¸ãƒ«ã‚’æŒã£ã¦ããŸã€‚<br>
          æœºã«ä¸¦ã¹ãŸã‚‰ã€ãã‚Œã ã‘ã§ä½•ã‹ãŒå§‹ã¾ã£ãŸã€‚<br><br>
          ã„ã¤ã‚‚çª“å´ã«åº§ã‚‹ã€ã‚ã®é™ã‹ãªäººãŒãƒˆãƒãƒˆã®è‹—ã‚’æ‰‹ã«ã—ã¦ã€ã½ã¤ã‚Šã¨è¨€ã£ãŸã€‚<br>
          ã€Œã“ã‚Œã€æ¯ãŒè‚²ã¦ã¦ãŸã‚“ã§ã™ã€<br>
          èª°ã‚‚ã€Œè©³ã—ãèã‹ã›ã¦ã€ã¨ã¯è¨€ã‚ãªã‹ã£ãŸã€‚ãŸã ã€å°‘ã—ç©ºæ°—ãŒæŸ”ã‚‰ã‹ããªã£ãŸã€‚<br><br>
          å½¼ã¯ã€ç¨®ã¾ãã®å‰ã«ãƒˆãƒ¬ã‚¤ã‚’ãã£ã¨æŒ‡ã§ã€Œãƒˆãƒ³ãƒˆãƒ³ã€ã¨å©ãç™–ã‚’è¦‹ã›ã¦ãã‚ŒãŸã€‚ã€Œæ ¹ã£ã“ã‚’èµ·ã“ã™åˆå›³ãªã‚“ã§ã™ã£ã¦ã€ã€‚<br>
          å­ã©ã‚‚ãŒçœŸä¼¼ã—ã¦ã€ã‚„ãŒã¦ã¿ã‚“ãªã§ãƒˆãƒ³ãƒˆãƒ³ã€ãƒˆãƒ³ãƒˆãƒ³ã€‚<br>
          å¯ç¬‘ã—ãã¦ã€ãã—ã¦ã‚„ã•ã—ã„å…‰æ™¯ã ã£ãŸã€‚<br><br>
          ãã®é€±ã€ãƒãƒ£ãƒƒãƒˆã¯æ¤ç‰©ã®å†™çœŸã§ã„ã£ã±ã„ã«ãªã£ãŸã€‚å‚¾ã„ãŸæ¤æœ¨é‰¢ã€ä¼¸ã³ã™ããŸèŒã€ã†ã¾ãã„ã‹ãªã„åœŸã€‚ã§ã‚‚ã¿ã‚“ãªã€ã“ã†æ›¸ã„ã¦ã„ãŸã€‚<br>
          ã€Œä»Šæ—¥ã‚‚ãƒˆãƒ³ãƒˆãƒ³ã—ãŸã‚ˆã€‚ãŠã¯ã‚ˆã†ã£ã¦ã€‚ã€<br><br>
          <em>ã‚¿ãƒã¯åœŸã§ã‚‚è‚²ã¤ã‘ã‚Œã©ã€ãŸã¶ã‚“â€œç‰©èªâ€ã§ã‚‚è‚²ã¤ã€‚</em>
        `,
        quoteEN: "We grow soil, then food, then community.",
        quoteJP: "åœŸã‚’è‚²ã¦ã€é£Ÿã‚’è‚²ã¦ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’è‚²ã¦ã‚‹ã€‚"
      },

      {
        key: 2,
        titleEN: "Unexpected Learning Becomes the New Norm",
        titleJP: "äºˆæœŸã›ã¬å­¦ã³ãŒæ—¥å¸¸ã«ãªã‚‹å ´æ‰€",
        by: "Community Member",
        minutes: 3,
        img: imgUrl("images/Mending.jpg"),
        bodyEN: `
          We were supposed to be learning repair skills. Sewing, patching, invisible mending. Practical things.<br>
          Instead, we learned each other.<br><br>
          I sat beside a woman who stitched like she was holding her breath. I asked where she learned. She didnâ€™t answer for a long time. Then she said her grandmother used to sew dresses during storms to keep calm.<br>
          â€œThunder makes me tremble,â€ she said. â€œSewing keeps my hands busy while my heart remembers how to be inside my ribs.â€<br><br>
          We kept stitching. No advice. No fixing.<br>
          The room was quiet except for thread sliding through cotton.<br><br>
          My patch came out uneven. She smiled at it like it was a childâ€™s drawing.<br>
          <em>â€œNot everything should be invisible,â€</em> she said.<br><br>
          I realized the workshop wasnâ€™t about repairing fabric. It was about letting the tear be seenâ€”and choosing to mend anyway.
        `,
        bodyJP: `
          ã“ã®æ—¥ã®ãƒ†ãƒ¼ãƒã¯ã€Œå¸ƒã®ä¿®ç¹•ã€ã ã£ãŸã€‚å®Ÿç”¨çš„ãªã€æ‰‹ã‚’å‹•ã‹ã™ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã€‚<br>
          ã§ã‚‚ã€å®Ÿéš›ã«ç¸«ã‚ã‚Œã¦ã„ãŸã®ã¯ã€ã‚‚ã£ã¨åˆ¥ã®ä½•ã‹ã ã£ãŸã€‚<br><br>
          éš£ã®å¸­ã®å¥³æ€§ã¯ã€æ¯ã‚’æ­¢ã‚ã‚‹ã¿ãŸã„ã«ç´°ã‹ãé‡ã‚’å‹•ã‹ã—ã¦ã„ãŸã€‚ã©ã“ã§è¦šãˆãŸã®ã‹èã„ãŸã‚‰ã€ã—ã°ã‚‰ãé»™ã£ã¦ã‹ã‚‰è¨€ã£ãŸã€‚<br>
          ã€Œåµã®æ—¥ã€ç¥–æ¯ã¯ãšã£ã¨ç¸«ã„ç‰©ã‚’ã—ã¦ãŸã‚“ã§ã™ã€‚é›·ãŒæ€–ã„ã¨æ‰‹ãŒéœ‡ãˆã‚‹ã‹ã‚‰ã€æ‰‹ã«ä»•äº‹ã‚’ã•ã›ã‚‹ã‚“ã ã£ã¦ã€‚ã€<br><br>
          ç§ãŸã¡ã¯é‡ã‚’é€²ã‚ç¶šã‘ãŸã€‚åŠ©è¨€ã‚‚ã—ãªã„ã€ç›´ã—åˆã„ã‚‚ã—ãªã„ã€‚ãŸã ã€ç³¸ãŒå¸ƒã‚’é€šã‚‹éŸ³ã ã‘ãŒç¶šã„ãŸã€‚<br><br>
          ç§ã®è£œä¿®ã¯ç«¯ãŒå°‘ã—æ­ªã‚“ã ã€‚ã§ã‚‚å½¼å¥³ã¯ã€å®ç‰©ã‚’è¦‹ã‚‹ã¿ãŸã„ã«ãã‚Œã‚’è¦‹ã¤ã‚ã¦è¨€ã£ãŸã€‚<br>
          <em>ã€Œç›´ã—ãŸè·¡ãŒè¦‹ãˆã‚‹ã®ã€ã„ã„ã§ã™ã­ã€‚ã€</em><br><br>
          ãã®ã¨ãã‚ã‹ã£ãŸã€‚ã“ã‚Œã¯å¸ƒã‚’ç›´ã™ä¼šã§ã¯ãªãã€ã»ã¤ã‚Œã‚’ã€Œè¦‹ãˆã‚‹ã¾ã¾ã€ã«ã—ã¦ã€ãã‚Œã§ã‚‚ç›´ãã†ã¨æ±ºã‚ã‚‹ä¼šã ã£ãŸã®ã ã¨ã€‚
        `,
        quoteEN: "Start with whatâ€™s at hand. Learn in public.",
        quoteJP: "æ‰‹å…ƒã‹ã‚‰å§‹ã‚ã‚‹ã€‚å­¦ã³ã¯ã¿ã‚“ãªã®å‰ã§ã€‚"
      },

      {
        key: 3,
        titleEN: "Book CafÃ© Reviews",
        titleJP: "ãƒ–ãƒƒã‚¯ã‚«ãƒ•ã‚§ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼",
        by: "Community Member",
        minutes: 3,
        img: imgUrl("images/BookReading.jpg"),
        bodyEN: `
          We donâ€™t really review books. We review the moment we met them.<br><br>
          Last week I read a poetry collection cornered between a sleepy cat and a kettle that wouldnâ€™t stop clicking. Halfway through a poem about loneliness, the kettle finally boiledâ€”loud, abruptâ€”and I laughed way too hard.<br>
          Someone looked over. We locked eyes. They laughed too. No reason. Just the shared absurdity of water reaching the temperature it was always going to reach.<br><br>
          Later, I wrote my review on a scrap of paper:<br>
          <em>â€œRead while waiting for something. It will make the waiting feel alive.â€</em><br>
          I tucked it between the pages.<br><br>
          I think someone found it. Because today the book is gone, but thereâ€™s a new scrap inside a different one:<br>
          <em>â€œThis one isnâ€™t for reading. Just hold it when youâ€™re sad.â€</em><br><br>
          The cafÃ© has become a place where books talk to us through strangersâ€™ handwriting. I like to think weâ€™re all writing to each other without needing to meet.
        `,
        bodyJP: `
          ã“ã“ã§ã¯æœ¬ã®è©•ä¾¡ã¯ã—ãªã„ã€‚ã€Œæœ¬ã¨å‡ºä¼šã£ãŸç¬é–“ã€ã‚’è¨˜éŒ²ã™ã‚‹ã€‚<br><br>
          å…ˆé€±ã¯ã€çœ ãã†ãªçŒ«ã¨ã€æ­¢ã¾ã‚‰ãªã„ã‚±ãƒˆãƒ«ã®ã€Œã‚«ãƒã€ã‚«ãƒâ€¦ã€ã«æŒŸã¾ã‚Œã¦è©©é›†ã‚’èª­ã‚“ã ã€‚å­¤ç‹¬ã«ã¤ã„ã¦ã®è©©ã®é€”ä¸­ã§ã€ãŠæ¹¯ãŒã„ããªã‚Šæ²¸é¨°ã—ãŸã€‚å¤§ããã€å”çªã«ã€‚ç§ã¯ãªãœã‹ç¬‘ã£ã¦ã—ã¾ã£ãŸã€‚<br>
          å‘ã‹ã„ã®äººã¨ç›®ãŒåˆã£ã¦ã€ç›¸æ‰‹ã‚‚ç¬‘ã£ãŸã€‚ç†ç”±ã¯ãªã„ã€‚ãŸã ã€æ°´ãŒã„ã¤ã‹å¿…ãšæ²¸ãã¨ã„ã†å½“ãŸã‚Šå‰ã‚’ã€ä¸€ç·’ã«ç›®æ’ƒã—ãŸã ã‘ã€‚<br><br>
          å¾Œã§ã€ç´™åˆ‡ã‚Œã«ã“ã†æ›¸ã„ã¦æœ¬ã«æŒŸã‚“ã ã€‚<br>
          <em>ã€Œä½•ã‹ã‚’å¾…ã¤æ™‚é–“ã«èª­ã‚€ã¨ã€å¾…ã¡æ™‚é–“ãŒç”Ÿãç‰©ã«ãªã‚‹ã€‚ã€</em><br><br>
          ãŸã¶ã‚“èª°ã‹ãŒè¦‹ã¤ã‘ãŸã®ã ã‚ã†ã€‚ä»Šæ—¥ã¯ãã®æœ¬ãŒæ£šã‹ã‚‰æ¶ˆãˆã¦ã€åˆ¥ã®æœ¬ã«ã¯æ–°ã—ã„ç´™ãŒæŒŸã¾ã£ã¦ã„ãŸã€‚<br>
          <em>ã€Œã“ã®æœ¬ã¯èª­ã‚€ãŸã‚ã˜ã‚ƒãªã„ã€‚æ‚²ã—ã„æ—¥ã«ã€ãŸã æŠ±ãˆã¦ã„ã¦ã€‚ã€</em><br><br>
          æœ¬ã¯ã€çŸ¥ã‚‰ãªã„èª°ã‹ã®æ‰‹æ›¸ãã‚’é€šã—ã¦ç§ãŸã¡ã«è©±ã—ã‹ã‘ã‚‹ã€‚ä¼šã‚ãªãã¦ã‚‚ã€ç§ãŸã¡ã¯äº’ã„ã«æ‰‹ç´™ã‚’æ›¸ã„ã¦ã„ã‚‹ã®ã ã¨æ€ã†ã€‚
        `,
        quoteEN: "A good cafÃ© leaves room for your thoughts to sit down.",
        quoteJP: "ã‚ˆã„ã‚«ãƒ•ã‚§ã¯ã€è€ƒãˆãŒè…°ã‚’ä¸‹ã‚ã›ã‚‹ä½™ç™½ã‚’ãã‚Œã‚‹ã€‚"
      }
    ];

    /* STATE */
    let lang = localStorage.getItem("fusion_lang") === "JP" ? "JP" : "EN";
    const app = document.getElementById("app");
    const t = () => dict[lang];

    function navigate(to){ if(location.hash.slice(1)!==to) location.hash = to; window.scrollTo({top:0,behavior:"smooth"}); }
    function pad(n){ return n.toString().padStart(2,'0'); }
    function formatISO(d){ return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`; }

    function countdownLabel(dateStr){ const now=new Date(); const eventDate=new Date(dateStr); const diff=eventDate-now; const days=Math.floor(diff/(1000*60*60*24)); const hours=Math.floor((diff%(1000*60*60*24))/(1000*60*60)); return diff>0?`â° ${days}${t().daysLeft} ${hours}${t().hoursLeft}`:`<span style="color: var(--sage-green);">${t().happeningNow}</span>`; }

    function backBar(label,to){ return `<div class="max-w-6xl mx-auto px-4"><button onclick="navigate('${to}')" class="text-sm inline-flex items-center gap-2 mb-6" style="color:var(--forest-green);"><span class="inline-block rotate-180">âœ</span> ${label}</button></div>`; }
    function card(inner){ return `<div class="overflow-hidden bg-white rounded-xl shadow-sm border-0 card-hover">${inner}</div>`; }

    /* ---------- JAPANESE HOLIDAYS (2000â€“2150 approx) ---------- */
    function nthMonday(year, month, n){ // month: 1-12
      const first=new Date(year, month-1,1); const day=(1-first.getDay()+7)%7; // 0=Sun
      return new Date(year, month-1, 1+day + 7*(n-1));
    }
    function vernalEquinoxDay(year){ // around Mar 20
      const d = Math.floor(20.8431 + 0.242194*(year-1980)) - Math.floor((year-1980)/4);
      return new Date(year,2,d); // March (2)
    }
    function autumnalEquinoxDay(year){ // around Sep 23
      const d = Math.floor(23.2488 + 0.242194*(year-1980)) - Math.floor((year-1980)/4);
      return new Date(year,8,d); // September (8)
    }
    function jpholidays(year){
      const H={};
      const add=(dt,name)=>{ const k=formatISO(dt); H[k]=name; };
      add(new Date(year,0,1), 'å…ƒæ—¥');
      add(nthMonday(year,1,2),'æˆäººã®æ—¥');
      add(new Date(year,1,11),'å»ºå›½è¨˜å¿µã®æ—¥');
      add(new Date(year,1,23),'å¤©çš‡èª•ç”Ÿæ—¥');
      add(vernalEquinoxDay(year),'æ˜¥åˆ†ã®æ—¥');
      add(new Date(year,3,29),'æ˜­å’Œã®æ—¥');
      add(new Date(year,4,3),'æ†²æ³•è¨˜å¿µæ—¥');
      add(new Date(year,4,4),'ã¿ã©ã‚Šã®æ—¥');
      add(new Date(year,4,5),'ã“ã©ã‚‚ã®æ—¥');
      add(nthMonday(year,7,3),'æµ·ã®æ—¥');
      add(new Date(year,7,11),'å±±ã®æ—¥');
      add(nthMonday(year,9,3),'æ•¬è€ã®æ—¥');
      add(autumnalEquinoxDay(year),'ç§‹åˆ†ã®æ—¥');
      add(nthMonday(year,10,2),'ã‚¹ãƒãƒ¼ãƒ„ã®æ—¥');
      add(new Date(year,10,3),'æ–‡åŒ–ã®æ—¥');
      add(new Date(year,10,23),'å‹¤åŠ´æ„Ÿè¬ã®æ—¥');
      // æŒ¯æ›¿ä¼‘æ—¥ (if holiday on Sunday, next weekday becomes holiday)
      const dates=Object.keys(H).sort();
      dates.forEach(k=>{ const d=new Date(k); if(d.getDay()===0){ // Sunday
        let i=1; while(true){ const sub=new Date(d); sub.setDate(d.getDate()+i); const key=formatISO(sub); if(!H[key] && sub.getDay()!==0){ H[key]=H[k]+'ï¼ˆæŒ¯æ›¿ä¼‘æ—¥ï¼‰'; break; } i++; }
      }});
      // å›½æ°‘ã®ä¼‘æ—¥ (sandwich day between two holidays)
      for(let m=0;m<12;m++){
        for(let d=1; d<=31; d++){
          const dt=new Date(year,m,d); if(dt.getMonth()!==m) break; const k=formatISO(dt);
          const prev=new Date(year,m,d-1); const next=new Date(year,m,d+1);
          const kp=formatISO(prev), kn=formatISO(next);
          if(!H[k] && H[kp] && H[kn] && dt.getDay()!==0 && dt.getDay()!==6){ H[k]='å›½æ°‘ã®ä¼‘æ—¥'; }
        }
      }
      return H;
    }

    /* ---------- BUSINESS DAYS CONFIG ---------- */
    // 0=Sun 1=Mon ... 6=Sat
    const businessClosedWeekdays = [2]; // e.g., closed every Tuesday
    const exceptionalClosed = new Set([ /* '2025-12-30' etc */ ]);
    const exceptionalOpen   = new Set([ /* override closed/holiday */ ]);

    function isClosed(dateISO, dt, holidays){
      if(exceptionalOpen.has(dateISO)) return false;
      if(exceptionalClosed.has(dateISO)) return true;
      const isHoliday = !!holidays[dateISO];
      const isWeeklyClosed = businessClosedWeekdays.includes(dt.getDay());
      return isHoliday || isWeeklyClosed;
    }

    /* ---------- EVENTS MAP ---------- */
    function eventsByDate(){
      const map={};
      eventList.forEach(e=>{ const d=new Date(e.date.full); const key=formatISO(d); if(!map[key]) map[key]=[]; map[key].push(e); });
      return map;
    }

    /* ---------- CALENDAR RENDER ---------- */
    function monthMatrix(year, monthIndex){ // monthIndex 0-11
      const first = new Date(year, monthIndex, 1);
      const start = new Date(first);
      // move back to the SUNDAY on/before the 1st
      start.setDate(1 - first.getDay()); // 0=Sun, 1=Mon, ...
      const cells = [];
      for (let i = 0; i < 42; i++) {
        const d = new Date(start);
        d.setDate(start.getDate() + i);
        cells.push(d);
      }
      return cells;
    }

    function MonthView(year, monthIndex, holidays, evMap){
      const monthName = new Date(year,monthIndex,1).toLocaleString(lang==='EN'?'en-US':'ja-JP', { month:'long', year:'numeric' });
      const dow = (lang==='EN')? ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'] : ['æ—¥','æœˆ','ç«','æ°´','æœ¨','é‡‘','åœŸ'];
      const cells = monthMatrix(year, monthIndex);
      const todayISO = formatISO(new Date());
      return `
      <div class="cal-wrap">
        <div class="cal-header"><div class="cal-title">${monthName}</div></div>
        <div class="cal-grid">
          ${dow.map(d=>`<div class="cal-dow text-center">${d}</div>`).join('')}
          ${cells.map(d=>{
            const iso = formatISO(d);
            const inMonth = d.getMonth()===monthIndex;
            const holName = holidays[iso];
            const closed = isClosed(iso, d, holidays);
            const evs = evMap[iso]||[];
            const isToday = iso===todayISO;
            const classes = [ 'cal-cell', inMonth?'':'cal-other-month', isToday?'cal-today':'', holName?'cal-holiday':'', closed&&!holName?'cal-closed':'cal-open' ].join(' ');
            const dotColor = holName? 'background:var(--holiday)' : (closed? 'background:var(--closed)' : 'background:var(--open)');
            return `
              <div class="${classes}">
                <div class="flex items-center justify-between">
                  <span class="cal-date">${d.getDate()}</span>
                  <span class="cal-chip">${holName ? (lang==='EN'?'Holiday':'ç¥æ—¥') : (closed ? (lang==='EN'?'Closed':'ä¼‘æ¥­') : (lang==='EN'?'Open':'å–¶æ¥­'))}</span>
                </div>
                <div class="mt-2">
                  ${evs.slice(0,4).map(()=>`<span class="cal-dot" style="${dotColor}"></span>`).join('')}
                  ${evs.length>4?`<span class="text-xs opacity-60">+${evs.length-4}</span>`:''}
                </div>
                <div class="cal-tooltip">
                  <div class="font-semibold mb-1">${holName? holName+' ãƒ» ':''}${closed && !holName ? (lang==='EN'?'Closed':'ä¼‘æ¥­'): (!closed ? (lang==='EN'?'Open':'å–¶æ¥­'):'')}</div>
                  ${evs.length? evs.map(e=>`<div class="mb-1">â€¢ ${(lang==='EN'?e.titleEN:e.titleJP)} <span class="opacity-75">(${e.time})</span></div>`).join('') : `<div class="opacity-70">${t().calNoEvents}</div>`}
                </div>
              </div>`;
          }).join('')}
        </div>
      </div>`;
    }

    function CalendarPage(){
      const now=new Date();
      const year1=now.getFullYear(); const month1=now.getMonth();
      const next=new Date(year1, month1+1, 1);
      const year2=next.getFullYear(); const month2=next.getMonth();
      const holidays = { ...jpholidays(year1), ...jpholidays(year2) };
      const evMap = eventsByDate();
      const legend = `
        <div class="flex items-center gap-4 flex-wrap text-sm">
          <span class="flex items-center gap-2"><span class="legend-dot" style="background:var(--open)"></span>${t().calOpen}</span>
          <span class="flex items-center gap-2"><span class="legend-dot" style="background:var(--closed)"></span>${t().calClosed}</span>
          <span class="flex items-center gap-2"><span class="legend-dot" style="background:var(--holiday)"></span>${t().calHoliday}</span>
        </div>`;
      return `
      <section class="max-w-6xl mx-auto py-16 px-4 fade-enter">
        <div class="flex items-center justify-between mb-4"><h2 class="text-4xl font-serif" style="color:var(--forest-green);">${t().calTitle}</h2></div>
        <div class="mb-6">${legend}</div>
        <div class="grid md:grid-cols-2 gap-6">
          ${MonthView(year1, month1, holidays, evMap)}
          ${MonthView(year2, month2, holidays, evMap)}
        </div>
        <div class="mt-8 text-sm text-[var(--olive)]">${lang==='EN' ? 'Tip: Hover a day to see events and holiday names. Closed weekday is irregular.' : 'â€»æ—¥ä»˜ã«ã‚«ãƒ¼ã‚½ãƒ«ã§ã€ã‚¤ãƒ™ãƒ³ãƒˆã‚„ç¥æ—¥åã‚’è¡¨ç¤ºã€‚å®šä¼‘æ—¥ã¯ä¸å®šæœŸã€‚'}</div>
      </section>`;
    }

    /* ----------- Detail pages (unchanged structure) ----------- */
    function SpaceDetail(spaceObj){
      return `
        ${backBar(t().backSpaces,"Spaces")}
        <section class="max-w-6xl mx-auto px-4 fade-enter">
          <div class="relative h-60 md:h-80 rounded-2xl overflow-hidden shadow">
            <img src="${spaceObj.hero}" class="w-full h-full object-cover" alt="${spaceObj.title}"/>
            <div class="absolute inset-0 bg-black/20"></div>
            <h2 class="absolute bottom-4 left-4 text-white text-3xl md:text-4xl font-serif">${spaceObj.title}</h2>
          </div>

          <p class="mt-6 text-lg leading-relaxed max-w-3xl">
            ${lang === 'EN' ? spaceObj.pageDescEN : spaceObj.pageDescJP}
          </p>

          <div class="grid md:grid-cols-3 gap-6 mt-10">
            ${spaceObj.blocks.map(b => card(`
              <div class="p-6">
                <h3 class="text-xl font-semibold mb-2" style="color:${spaceObj.color}">
                  ${lang === 'EN' ? b.hEN : b.hJP}
                </h3>
                <p class="text-sm text-gray-700">
                  ${lang === 'EN' ? b.pEN : b.pJP}
                </p>
              </div>
            `)).join("")}
          </div>
        </section>`;
    }
    function EventDetail(e){
      const isRecurring = e.kind === "recurring";
      const scheduleLabel = isRecurring
        ? (lang==='EN' ? e.recurEN : e.recurJP)
        : new Date(e.date.full).toLocaleString(lang==='EN'?'en-US':'ja-JP', { dateStyle:'full', timeStyle:'short' });

      const cap = e.capacity ?? 12;
      const bullets = (lang==='EN' ? e.bulletsEN : e.bulletsJP) || [];

      return `
      ${backBar(t().backEvents,"Events")}
      <section class="max-w-3xl mx-auto px-4 fade-enter">
        <div class="flex items-center gap-3 mb-2">
          <span class="text-xs px-2 py-1 rounded-full" style="background:${isRecurring?'#E8DCC4':'#8B9D83'}; color:${isRecurring?'#2C2A28':'#fff'};">
            ${isRecurring ? (lang==='EN'?'Recurring':'å®šæœŸé–‹å‚¬') : (lang==='EN'?'One-day Special':'ç‰¹åˆ¥é–‹å‚¬')}
          </span>
          <span class="text-xs px-2 py-1 rounded-full border" style="border-color:var(--warm-beige);">
            ${e.cat}
          </span>
        </div>

        <h2 class="text-3xl md:text-4xl font-serif mb-2">${lang==='EN'?e.titleEN:e.titleJP}</h2>
        <p class="text-gray-700 mb-4">
          ${t().date} <strong>${scheduleLabel}</strong> Â· ${t().time} <strong>${e.time}</strong> Â· ${t().capacity} <strong>${cap}</strong>
        </p>

        <img src="${e.img}" alt="event" class="rounded-xl shadow mb-6"/>

        <p class="text-lg leading-relaxed mb-4">${lang==='EN'?e.descEN:e.descJP}</p>

        ${bullets.length ? `
          <ul class="list-disc ml-6 text-[0.95rem] leading-relaxed mb-6">
            ${bullets.map(b=>`<li>${b}</li>`).join('')}
          </ul>` : ''}

        <button class="btn" style="background: var(--terracotta); color:#fff;">${t().reserve}</button>
      </section>`;
    }
    function StoryDetail(s){
      return `
        ${backBar(t().backStories,"Stories")}
        <section class="max-w-3xl mx-auto px-4 fade-enter">
          <h2 class="text-3xl md:text-4xl font-serif mb-2">
            ${lang==="EN" ? s.titleEN : s.titleJP}
          </h2>
          <p class="text-gray-600 mb-4">
            ${lang==="EN" ? "By" : "åŸ·ç­†"}: ${s.by} Â· ${s.minutes} ${t().minRead}
          </p>

          <img src="${s.img}" alt="story" class="rounded-xl shadow mb-6"/>

          <div class="text-lg leading-relaxed mb-4">
            ${lang==="EN" ? formatBody(s.bodyEN) : formatBody(s.bodyJP)}
          </div>

          <blockquote class="italic border-l-4 pl-4"
            style="border-color:var(--warm-beige); color:var(--charcoal);">
            ${lang==="EN" ? s.quoteEN : s.quoteJP}
          </blockquote>
        </section>`;
    }

    function StatsSection(){ const stats=[{num:150,label:t().communityMembers,icon:"ğŸ‘¥"},{num:24,label:t().monthlyWorkshops,icon:"ğŸ¨"},{num:300,label:t().gardenHarvests,icon:"ğŸŒ¿"},{num:8,label:t().languagesSpoken,icon:"ğŸŒ"},]; return `<section class="py-16" style="background: linear-gradient(135deg, rgba(139,157,131,0.1) 0%, rgba(232,220,196,0.3) 100%);"><div class="max-w-6xl mx-auto px-4"><h3 class="text-3xl font-serif text-center mb-10" style="color: var(--forest-green);">${t().byTheNumbers}</h3><div class="grid md:grid-cols-4 gap-8 text-center">${stats.map(stat=>`<div class="stat-counter" data-target="${stat.num}" data-duration="2000"><div class="text-5xl mb-2 icon-pulse rounded-full w-20 h-20 mx-auto flex items-center justify-center">${stat.icon}</div><div class="text-4xl font-bold counter" style="color: var(--forest-green);">0</div><div class="text-sm mt-1" style="color: var(--olive);">${stat.label}</div></div>`).join("")}</div></div></section>`; }

    function SeasonalCalendar(){ const seasons={ spring:{icon:"ğŸŒ¸",color:"#FFB7D5",actEN:"Seed Planting",actJP:"ç¨®ã¾ã",months:lang==='EN'?"Mar-May":"3-5æœˆ"}, summer:{icon:"ğŸŒ»",color:"#FFD93D",actEN:"Harvest Festival",actJP:"åç©«ç¥­",months:lang==='EN'?"Jun-Aug":"6-8æœˆ"}, autumn:{icon:"ğŸ‚",color:"#FF8C42",actEN:"Preserving Workshop",actJP:"ä¿å­˜é£Ÿä½œã‚Š",months:lang==='EN'?"Sep-Nov":"9-11æœˆ"}, winter:{icon:"â„ï¸",color:"#6BB6FF",actEN:"Indoor Crafts",actJP:"å®¤å†…å·¥èŠ¸",months:lang==='EN'?"Dec-Feb":"12-2æœˆ"}}; return `<section class="py-16" style="background: var(--cream);"><div class="max-w-6xl mx-auto px-4"><h3 class="text-3xl font-serif text-center mb-10" style="color: var(--forest-green);">${t().seasonalRhythm}</h3><div class="grid md:grid-cols-4 gap-6">${Object.entries(seasons).map(([key,s])=>`<div class="rounded-xl p-6 text-center cursor-pointer season-card" style="background: linear-gradient(135deg, ${s.color}20 0%, ${s.color}40 100%); border: 2px solid ${s.color}80; transition:all .3s;"><div class="mb-3"><span class="inline-block animate-bounce-subtle"><span class="season-emoji text-6xl inline-block">${s.icon}</span></span></div><div class="text-lg font-semibold capitalize mb-1">${t()[key]}</div><div class="text-xs mb-3" style="color: var(--olive);">${s.months}</div><div class="text-sm">${lang==='EN'?s.actEN:s.actJP}</div></div>`).join("")}</div></div></section>`; }

    function TestimonialCarousel(){ const testimonials=[{quoteEN:"I used to understand food in a practical way. The community cooking sessions have shown me that it is a language of connection â€” expressed through time, efforts, and stories we create.",quoteJP:"é£Ÿäº‹ã¯æ „é¤Šã‚’æ‘‚ã‚‹ãŸã‚ã ã‘ã®ã‚‚ã®ã ã¨æ€ã£ã¦ã„ã¾ã—ãŸã€‚ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ã¿ã‚“ãªã§æ–™ç†ã‚’ã™ã‚‹ä¸­ã§ã€ãã‚Œã¯ã€Œã¤ãªãŒã‚Šã€ãã®ã‚‚ã®ãªã‚“ã ã¨æ°—ã¥ã„ãŸã€‚å…±ã«éã”ã™æ™‚é–“ã€è¾¼ã‚ãŸæƒ³ã„ã€ç”Ÿã¾ã‚Œã‚‹ä¼šè©±ã€ã™ã¹ã¦ç‰©èªã£ã¦ã‚‹ã€‚",name:"Aisha Karim",roleEN:"Cafe Regular",roleJP:"ã‚«ãƒ•ã‚§å¸¸é€£",img:"ğŸ§‘â€ğŸ³"},{quoteEN:"I came to learn Japanese, but I found a second family here.",quoteJP:"æ—¥æœ¬èªã‚’å­¦ã³ã«æ¥ã¾ã—ãŸãŒã€ã“ã“ã§ç¬¬äºŒã®å®¶æ—ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚",name:"Samuel Okoye",roleEN:"Language Exchange Member",roleJP:"è¨€èªäº¤æ›å‚åŠ è€…",img:"ğŸ‘¨â€ğŸ«"},{quoteEN:"People taught me how to see.<br>The garden taught me how to wait.",quoteJP:"äººã¯ã€ã‚‚ã®ã®è¦‹æ–¹ã‚’æ•™ãˆã¦ãã‚Œã¾ã—ãŸã€‚åº­ã¯ã€å¾…ã¤ã“ã¨ã‚’æ•™ãˆã¦ãã‚Œã¾ã—ãŸã€‚",name:"Sakura Tanaka",roleEN:"Garden Volunteer",roleJP:"æ ½åŸ¹ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢",img:"ğŸ‘©â€ğŸŒ¾"}]; return `<section class="py-16" style="background: linear-gradient(to right, rgba(139,157,131,0.1), rgba(107,124,89,0.1));"><div class="max-w-4xl mx-auto px-4"><h3 class="text-3xl font-serif text-center mb-10" style="color: var(--forest-green);">${t().communityVoices}</h3><div class="testimonial-carousel relative overflow-hidden"><div class="testimonial-track" id="testimonialTrack">${testimonials.map(test=>`<div class="testimonial-slide w-full px-4"><div class="bg-white rounded-2xl p-8 shadow-lg text-center"><div class="text-6xl mb-4">${test.img}</div><p class="text-lg italic mb-4" style="color: var(--charcoal);">"${lang==='EN'?test.quoteEN:test.quoteJP}"</p><div class="text-sm font-semibold" style="color: var(--forest-green);">${test.name}</div><div class="text-xs" style="color: var(--olive);">${lang==='EN'?test.roleEN:test.roleJP}</div></div></div>`).join("")}</div><div class="flex justify-center gap-2 mt-6">${testimonials.map((_,i)=>`<button class="testimonial-dot w-3 h-3 rounded-full" style="background:${i===0?'var(--sage-green)':'var(--warm-beige)'}" onclick="goToTestimonial(${i})"></button>`).join("")}</div></div></div></section>`; }

    function GardenMapSection(){ const plants=[{x:'10%',y:'10%',plant:'ğŸ‡',nameEN:'Grapes',nameJP:'è‘¡è„',ready:false},{x:'25%',y:'90%',plant:'ğŸŠ',nameEN:'Oranges',nameJP:'ã¿ã‹ã‚“',ready:true},{x:'20%',y:'30%',plant:'ğŸ…',nameEN:'Tomatoes',nameJP:'ãƒˆãƒãƒˆ',ready:false},{x:'45%',y:'40%',plant:'ğŸŒ¹',nameEN:'Roses',nameJP:'è–”è–‡',ready:false},{x:'30%',y:'20%',plant:'ğŸ«˜',nameEN:'Beans',nameJP:'è±†',ready:true},{x:'60%',y:'40%',plant:'ğŸ«‘',nameEN:'Peppers',nameJP:'ãƒ”ãƒ¼ãƒãƒ³',ready:false},{x:'50%',y:'85%',plant:'ğŸ«š',nameEN:'Ginger',nameJP:'ç”Ÿå§œ',ready:false},{x:'70%',y:'70%',plant:'ğŸ¥‘',nameEN:'Avocadoes',nameJP:'ã‚¢ãƒœã‚«ãƒ‰',ready:false},{x:'80%',y:'90%',plant:'ğŸŒ»',nameEN:'Sunflower',nameJP:'ã²ã¾ã‚ã‚Š',ready:false},{x:'40%',y:'60%',plant:'ğŸŒ½',nameEN:'Corn',nameJP:'ã¨ã†ã‚‚ã‚ã“ã—',ready:false},{x:'75%',y:'25%',plant:'ğŸ¥•',nameEN:'Carrots',nameJP:'ã«ã‚“ã˜ã‚“',ready:true},{x:'90%',y:'75%',plant:'ğŸ ',nameEN:'Sweet Potatoes',nameJP:'ã•ã¤ã¾ã„ã‚‚',ready:true},{x:'15%',y:'70%',plant:'ğŸŒ¿',nameEN:'Herbs',nameJP:'ãƒãƒ¼ãƒ–',ready:true},{x:'10%',y:'50%',plant:'ğŸŒ°',nameEN:'Chestnuts',nameJP:'æ —',ready:false},{x:'50%',y:'10%',plant:'ğŸ¥­',nameEN:'Mangoes',nameJP:'ãƒãƒ³ã‚´ãƒ¼',ready:false},{x:'90%',y:'40%',plant:'ğŸ«',nameEN:'Berries',nameJP:'ãƒ™ãƒªãƒ¼',ready:false},{x:'95%',y:'20%',plant:'ğŸª»',nameEN:'Lavender',nameJP:'ãƒ©ãƒ™ãƒ³ãƒ€ãƒ¼',ready:true},]; return `<div class="garden-map my-8"><h3 class="text-2xl font-serif mb-6 text-center">${t().interactiveGarden}</h3><div class="relative w-full rounded-xl overflow-hidden" style="height:24rem; background: linear-gradient(to bottom, rgba(107,124,89,0.2) 0%, rgba(139,157,131,0.3) 100%);">${plants.map(p=>`<div class="plant-marker group" style="left:${p.x}; top:${p.y}; transform:translate(-50%,-50%);"><div class="text-5xl transition-transform ${p.ready?'animate-bounce-subtle':''}" style="${p.ready?'':'opacity:.5;'}">${p.plant}</div><div class="plant-tooltip">${lang==='EN'?p.nameEN:p.nameJP}${p.ready?` â€¢ ${t().readyHarvest}`:''}</div></div>`).join("")}</div><div class="text-center text-sm mt-4" style="color: var(--olive);">${t().hoverPlants}</div></div>`; }

    function upcomingEvents(limit = 3){
      const now = Date.now();
      return eventList
        .filter(e => new Date(e.date.full).getTime() >= now)
        .sort((a,b)=> new Date(a.date.full) - new Date(b.date.full))
        .slice(0, limit);
    }

    function HomePage(){
  return `
<section class="text-center fade-enter">
  <section class="relative flex flex-col items-center justify-center text-center bg-cover bg-center"
           style="height:70vh;background-image:linear-gradient(rgba(139,157,131,.35),rgba(74,93,74,.35)),url('images/Landscape.jpg');">
    <div class="absolute inset-0" style="background:rgba(245,241,230,.5);"></div>
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <div class="float-element" style="top:20%;left:10%;animation-delay:0s;">ğŸŒ¿</div>
      <div class="float-element" style="top:60%;right:15%;animation-delay:2s;">ğŸƒ</div>
      <div class="float-element" style="bottom:30%;left:70%;animation-delay:4s;">ğŸŒ¸</div>
      <div class="float-element" style="top:40%;right:40%;animation-delay:3s;font-size:3rem;opacity:0.1;">ğŸŒ±</div>
    </div>
    <div class="relative z-10 p-6 rounded-xl max-w-3xl border"
         style="backdrop-filter:blur(12px);border-color:rgba(255,255,255,.4);">
      <h1 class="text-4xl md:text-6xl font-serif mb-3 text-white" style="text-shadow:0 2px 4px rgba(0,0,0,.3);">${t().heroTitle}</h1>
      <p class="text-lg md:text-2xl italic mb-6" style="color:rgba(255,255,255,.95);">${t().heroSub}</p>
      <p class="text-md md:text-lg mb-8" style="color:rgba(255,255,255,.95);">${t().heroDesc}</p>
      <div class="flex gap-4 justify-center flex-wrap">
        <button class="btn" onclick="navigate('Events')">${t().cta1}</button>
        <button class="btn border" style="background:#fff;color:var(--forest-green);" onclick="navigate('Visit')">${t().cta2}</button>
      </div>
    </div>
  </section>

  <section class="max-w-6xl mx-auto py-16 px-4 text-center">
    <h2 class="text-3xl md:text-4xl font-serif mb-2" style="color: var(--forest-green);">${t().welcome}</h2>
    <p class="text-lg mb-2 italic" style="color: var(--olive);">${t().welcomeSub}</p>
    <p class="text-lg max-w-2xl mx-auto mb-10">${t().welcomeP}</p>
    <div class="grid md:grid-cols-3 gap-6">
      ${spaces.map(s=>`
        <div class="text-left cursor-pointer" onclick="navigate('Space:${s.key}')">
          ${card(`
            <img src="${s.hero}" alt="${s.title}" class="h-48 w-full object-cover" loading="lazy" referrerpolicy="no-referrer"/>
            <div class="p-6 bg-white">
              <h3 class="text-xl font-semibold mb-2" style="color:${s.color};">${s.title}</h3>
              <p class="text-sm text-gray-700">${lang === 'EN' ? s.cardDescEN : s.cardDescJP}</p>
            </div>
          `)}
        </div>
      `).join("")}
    </div>
  </section>

  ${StatsSection()}

  <section class="py-16 text-center" style="background: rgba(232,220,196,0.4);">
    <h3 class="text-2xl font-serif mb-6">${t().howItWorks}</h3>
    <div class="flex justify-center items-center gap-6 flex-wrap">
      ${[t().visit,t().experience,t().share,t().grow].map((label,i)=>`
        <div class="flex items-center gap-3">
          <div class="w-16 h-16 rounded-full text-white grid place-items-center text-2xl icon-pulse"
               style="background:linear-gradient(135deg,var(--sage-green),var(--olive));">
               ${i===0?"ğŸ‘‹":i===1?"âœ¨":i===2?"ğŸ’«":"ğŸ€"}
          </div>
          <div class="text-lg font-semibold" style="color:var(--forest-green);">${label}</div>
          ${i<3?`<div class="text-2xl" style="color:var(--sage-green);">â†’</div>`:""}
        </div>
      `).join("")}
    </div>
  </section>

  ${SeasonalCalendar()}

  <section class="max-w-6xl mx-auto py-16 px-4 text-left">
    <h3 class="text-3xl font-serif mb-2">${t().happening}</h3>
    <div class="grid md:grid-cols-3 gap-6 mt-6">
      ${upcomingEvents(3).map((e)=>{
        const idx = eventList.indexOf(e);
        return `
          <div class="text-left cursor-pointer" onclick="navigate('Event:${idx}')">
            ${card(`
              <img src="${e.img}" alt="event" class="h-40 w-full object-cover" loading="lazy" referrerpolicy="no-referrer"/>
              <div class="p-5">
                <div class="text-xs font-semibold mb-1" style="color:var(--sage-green);">${e.cat}</div>
                <h4 class="text-lg font-semibold">${lang==='EN'?e.titleEN:e.titleJP}</h4>
                <p class="text-sm text-gray-600 mt-1">${t().by}: ${lang==='EN'?e.hostEN:e.hostJP} Â· ${e.time}</p>
                <p class="text-xs font-semibold mt-2" style="color:var(--terracotta);">${countdownLabel(e.date.full)}</p>
              </div>
            `)}
          </div>`;
      }).join("")}
    </div>
  </section>

  ${TestimonialCarousel()}
</section>`;
}

const recipes = [
    {
      key: 0,
      icon:"ğŸ„",
      titleEN:"Garden Vegetable & Wild Mushroom Soup with Yuzu Peel",
      titleJP:"åº­é‡èœã¨å±±ãã®ã“ã€æŸšå­çš®ã®ã‚¹ãƒ¼ãƒ—",
      byEN:"Tomiko", byJP:"ãƒˆãƒŸå­",
      introEN:"Slow-sautÃ©ed mushrooms release deep aroma; yuzu peel brightens a gentle miso broth.",
      introJP:"ãã®ã“ã‚’ã‚†ã£ãã‚Šç‚’ã‚ã¦æ—¨ã¿ã‚’å¼•ãå‡ºã—ã€æŸšå­çš®ã§æ¾„ã‚“ã é¦™ã‚Šã‚’é‡ã­ã‚‹ã‚„ã•ã—ã„å‘³å™Œä»•ç«‹ã¦ã€‚",
      ingredientsEN:["Carrot, daikon, komatsuna (bite-size)","Handpicked wild mushrooms, sliced","Light kombu-dashi, white miso","Ginger (matchsticks), garlic (thinly sliced), yuzu peel (very thinly sliced)"],
      ingredientsJP:["ã«ã‚“ã˜ã‚“ãƒ»å¤§æ ¹ãƒ»å°æ¾èœï¼ˆé£Ÿã¹ã‚„ã™ãï¼‰","å±±ãã®ã“ï¼ˆè–„åˆ‡ã‚Šï¼‰","ç”Ÿå§œã›ã‚“åˆ‡ã‚Šãƒ»ã«ã‚“ã«ãè–„åˆ‡ã‚Š","æ˜†å¸ƒã ã—ãƒ»ç™½å‘³å™Œ","æŸšå­çš®ï¼ˆæ¥µè–„ï¼‰"],
      stepsEN:["SautÃ© mushrooms gently in a film of oil until fragrant.","Add dashi, carrots, daikon; simmer until just tender.","Remove from heat; dissolve white miso.","Add komatsuna to wilt; finish with yuzu peel."],
      stepsJP:["å°‘é‡ã®æ²¹ã§å¼±ç«ã§ãã®ã“ã‚’é¦™ã‚ŠãŒç«‹ã¤ã¾ã§ç‚’ã‚ã‚‹ã€‚","ã ã—ãƒ»ã«ã‚“ã˜ã‚“ãƒ»å¤§æ ¹ã‚’åŠ ãˆã€ã‚„ã‚ã‚‰ã‹ããªã‚‹ã¾ã§ç…®ã‚‹ã€‚","ç«ã‚’æ­¢ã‚ã¦ç™½å‘³å™Œã‚’æº¶ãã€‚","å°æ¾èœã‚’åŠ ãˆã¦ä½™ç†±ã§ã—ã‚“ãªã‚Šã€æŸšå­çš®ã§ä»•ä¸Šã’ã€‚"],
      finishEN:"Clear, lightly cloudy broth with tender vegetables; citrus aroma rising at the rim.",
      finishJP:"æ¾„ã‚“ã æ·¡ã„ã‚¹ãƒ¼ãƒ—ã«ã‚„ã‚ã‚‰ã‹ãªé‡èœã€æ¹¯æ°—ã‹ã‚‰ãµã£ã¨æŸšå­ãŒé¦™ã‚‹ã€‚",
      notesEN:"If mushrooms are watery, sautÃ© longer to concentrate. Do not boil after adding miso.",
      notesJP:"ãã®ã“ãŒæ°´ã£ã½ã„å ´åˆã¯é•·ã‚ã«ç‚’ã‚ã¦æ¿ƒç¸®ã€‚å‘³å™ŒæŠ•å…¥å¾Œã¯æ²¸é¨°ã•ã›ãªã„ã€‚"
    },
    {
      key: 1,
      icon:"ğŸ¥—",
      titleEN:"Field Herb Harvest Salad with Pickled Flower Vinegar",
      titleJP:"é‡ã®ãƒãƒ¼ãƒ–ã¨èŠ±é…¢ã®åç©«ã‚µãƒ©ãƒ€",
      byEN:"Leila", byJP:"ãƒ¬ã‚¤ãƒ©",
      introEN:"Hand-torn greens dressed with a floral, gently acidic vinaigrette.",
      introJP:"æ‰‹ã§ã¡ãã£ãŸè‘‰ã«ã€èŠ±ã®é¦™ã‚Šã‚’å«ã¾ã›ãŸè»½ã‚„ã‹ãªé…¸å‘³ã®ãƒ´ã‚£ãƒã‚°ãƒ¬ãƒƒãƒˆã€‚",
      ingredientsEN:["Mixed garden greens (hand-torn)","Shiso, mint, edible wild leaves","Pickled flower vinegar (sakura or sansho)","Cold-pressed olive oil","Toasted seeds (sunflower or buckwheat)"],
      ingredientsJP:["åº­ã®ãƒŸãƒƒã‚¯ã‚¹ã‚°ãƒªãƒ¼ãƒ³ï¼ˆæ‰‹ã§ã¡ãã‚‹ï¼‰","ã—ããƒ»ãƒŸãƒ³ãƒˆãƒ»é£Ÿã¹ã‚‰ã‚Œã‚‹é‡è‰","èŠ±é…¢ï¼ˆæ¡œé…¢ãƒ»èŠ±å±±æ¤’é…¢ãªã©ï¼‰","ä½æ¸©åœ§æ¾ã‚ªãƒªãƒ¼ãƒ–ã‚ªã‚¤ãƒ«","ç‚’ã‚Šç¨®ï¼ˆã²ã¾ã‚ã‚Šãƒ»ãã°ã®å®Ÿãªã©ï¼‰"],
      stepsEN:["Whisk flower vinegar with salt.","Stream in olive oil to lightly emulsify.","Toss greens and herbs; scatter seeds."],
      stepsJP:["èŠ±é…¢ã«å¡©ã‚’æº¶ã‹ã™ã€‚","ã‚ªãƒªãƒ¼ãƒ–ã‚ªã‚¤ãƒ«ã‚’ç³¸ã®ã‚ˆã†ã«åŠ ãˆè»½ãä¹³åŒ–ã€‚","è‘‰ã¨ãƒãƒ¼ãƒ–ã‚’å’Œãˆã€ç¨®ã‚’æ•£ã‚‰ã™ã€‚"],
      finishEN:"Glossed leaves with scattered seeds; herb perfume first, blossom second.",
      finishJP:"è‰¶ã®ã‚ã‚‹è‘‰ã«ç¨®ã®é£Ÿæ„Ÿã€‚ãƒãƒ¼ãƒ–ãŒå…ˆã«é¦™ã‚Šã€é…ã‚Œã¦èŠ±ã®é¢¨å‘³ã€‚",
      notesEN:"Add lemon zest if flower vinegar is mild.",
      notesJP:"èŠ±é…¢ãŒç©ã‚„ã‹ãªæ™‚ã¯ãƒ¬ãƒ¢ãƒ³çš®ã‚’å°‘é‡ã€‚"
    },
    {
      key: 2,
      icon:"ğŸ¥’",
      titleEN:"Nukazuke with Citrus Peel & Toasted Kombu",
      titleJP:"æŸšå­çš®ã¨ç‚™ã‚Šæ˜†å¸ƒã®ã¬ã‹æ¼¬ã‘",
      byEN:"Hyejin", byJP:"ãƒ˜ã‚¸ãƒ³",
      introEN:"Citrus and kombu perfume the nuka bed for layered umami.",
      introJP:"æŸ‘æ©˜ã¨æ˜†å¸ƒã‚’ã¬ã‹åºŠã«å¿ã°ã›ã€é¦™ã‚Šã¨æ—¨ã¿ã‚’å±¤ã§ã¤ãã‚‹ã€‚",
      ingredientsEN:["Seasonal vegetables (cucumber, turnip, radish)","Mature nuka bed","Roasted kombu strips","Yuzu/orange peel"],
      ingredientsJP:["å­£ç¯€ã®é‡èœï¼ˆãã‚…ã†ã‚Šãƒ»ã‹ã¶ãƒ»å¤§æ ¹ï¼‰","ç†Ÿæˆã—ãŸã¬ã‹åºŠ","ç‚™ã£ãŸæ˜†å¸ƒã®ç´°åˆ‡ã‚Š","æŸšå­ï¼ã¿ã‹ã‚“ã®çš®"],
      stepsEN:["Mix kombu & citrus into nuka.","Bury vegetables; turn daily.","Adjust salt if brine tastes dull."],
      stepsJP:["æ˜†å¸ƒã¨æŸ‘æ©˜çš®ã‚’ã¬ã‹åºŠã«æ··ãœè¾¼ã‚€ã€‚","é‡èœã‚’åŸ‹ã‚ã€æ¯æ—¥ã‹ãæ··ãœã‚‹ã€‚","å‘³ãŒã¼ã‚„ã‘ãŸã‚‰å¡©ã‚’å°‘é‡è¶³ã™ã€‚"],
      finishEN:"Crisp pickles with citrus echo and ocean depth.",
      finishJP:"æ­¯å¿œãˆã‚·ãƒ£ã‚­ãƒƒã€æŸ‘æ©˜ã®ä½™éŸ»ã«æµ·ã®æ—¨ã¿ã€‚",
      notesEN:"Replace peels weekly to keep aroma bright.",
      notesJP:"çš®ã¯é€±1ç›®å®‰ã§å…¥ã‚Œæ›¿ãˆã€‚"
    },
    {
      key: 3,
      icon:"ğŸ",
      titleEN:"Sourdough with Roasted Rice Bran",
      titleJP:"ç„™ç…ã¬ã‹ã‚µãƒ¯ãƒ¼ãƒ‰ã‚¦",
      byEN:"Evan", byJP:"ã‚¨ãƒ´ã‚¡ãƒ³",
      introEN:"Toasted nuka adds warm nuttiness to an airy crumb.",
      introJP:"ç„™ç…ã¬ã‹ã®é¦™ã°ã—ã•ãŒè»½ã‚„ã‹ãªç”Ÿåœ°ã«ã‚³ã‚¯ã‚’ä¸ãˆã‚‹ã€‚",
      ingredientsEN:["Active sourdough starter","Bread flour (+ whole grain)","Roasted rice bran (1â€“2 tbsp)","Sea salt, water"],
      ingredientsJP:["å…ƒæ°—ãªã‚µãƒ¯ãƒ¼ãƒ‰ã‚¦ç¨®","å¼·åŠ›ç²‰ï¼ˆå…¨ç²’ç²‰ãƒ–ãƒ¬ãƒ³ãƒ‰å¯ï¼‰","ç„™ç…ç±³ã¬ã‹ï¼ˆ1ã€œ2 tbspï¼‰","å¡©ãƒ»æ°´"],
      stepsEN:["Autolyse 30â€“60 min.","Add starter & salt; fold in bran.","Slow bulk; shape; proof.","Score & steam-bake; cool, then slice."],
      stepsJP:["ã‚ªãƒ¼ãƒˆãƒªãƒ¼ã‚º30ã€œ60åˆ†ã€‚","ç¨®ãƒ»å¡©ãƒ»ã¬ã‹ã‚’åˆã‚ã›ã‚‹ã€‚","ä½æ¸©é•·æ™‚é–“ç™ºé…µâ†’æˆå½¢â†’ãƒ›ã‚¤ãƒ­ã€‚","ã‚¯ãƒ¼ãƒ—â†’è’¸æ°—ç„¼æˆâ†’å†·ã¾ã—ã¦ã‚«ãƒƒãƒˆã€‚"],
      finishEN:"Thin crackling crust, gentle tang, toasty after-aroma.",
      finishJP:"è–„ããƒ‘ãƒªãƒƒã€ç©ã‚„ã‹ãªé…¸å‘³ã€é¦™ã°ã—ã„ä½™é¦™ã€‚",
      notesEN:"Nuka drinks waterâ€”add 2â€“3% hydration if tight.",
      notesJP:"ç”Ÿåœ°ãŒç¡¬ã‘ã‚Œã°åŠ æ°´ã‚’2ã€œ3%å¢—ã‚„ã™ã€‚"
    },
    {
      key: 4,
      icon:"ğŸª",
      titleEN:"Soft Almondâ€“Kinako Cookies",
      titleJP:"ããªç²‰ã¨ã‚¢ãƒ¼ãƒ¢ãƒ³ãƒ‰ã®ã‚½ãƒ•ãƒˆã‚¯ãƒƒã‚­ãƒ¼",
      byEN:"Noura", byJP:"ãƒŒãƒ¼ãƒ©",
      introEN:"Tender cookies with roasted-soy warmth; great with tea.",
      introJP:"ããªç²‰ã®é¦™ã°ã—ã•ã¨ã—ã£ã¨ã‚Šé£Ÿæ„Ÿã€‚ãŠèŒ¶ã«åˆã†ç´ æœ´ãªè´…æ²¢ã€‚",
      ingredientsEN:["Almond flour, kinako","Butter or coconut oil","Honey or maple","Pinch of salt"],
      ingredientsJP:["ã‚¢ãƒ¼ãƒ¢ãƒ³ãƒ‰ç²‰ãƒ»ããªç²‰","ãƒã‚¿ãƒ¼ or ã‚³ã‚³ãƒŠãƒƒãƒ„ã‚ªã‚¤ãƒ«","ã¯ã¡ã¿ã¤ or ãƒ¡ãƒ¼ãƒ—ãƒ«","å¡©ã²ã¨ã¤ã¾ã¿"],
      stepsEN:["Cream fat & sweetener; fold dry mix.","Chill; scoop mounds.","Bake low (160Â°C) to keep soft."],
      stepsJP:["æ²¹è„‚ã¨ç”˜å‘³æ–™ã‚’æ··ãœã€ç²‰é¡ã‚’åˆã‚ã›ã‚‹ã€‚","å†·ã‚„ã—ã¦æˆå½¢ã€‚","160Â°Cã§ã—ã£ã¨ã‚Šç„¼æˆã€‚"],
      finishEN:"Pale gold, soft centers; kinako blooms when warm.",
      finishJP:"æ·¡ã„ãã¤ã­è‰²ã€ä¸­å¿ƒã—ã£ã¨ã‚Šã€‚æ¸©ã‹ã„ã¨é¦™ã‚Šæœ€é«˜æ½®ã€‚",
      notesEN:"Add sesame for subtle snap.",
      notesJP:"ç™½ã”ã¾ã§é£Ÿæ„Ÿã‚¢ãƒƒãƒ—ã€‚"
    },
    {
      key: 5,
      icon:"ğŸ¥¯",
      titleEN:"Bagel Sandwich with Herb Tofu Cream",
      titleJP:"ãƒãƒ¼ãƒ–è±†è…ã‚¯ãƒªãƒ¼ãƒ ã®ãƒ™ãƒ¼ã‚°ãƒ«ã‚µãƒ³ãƒ‰",
      byEN:"Diego M", byJP:"ãƒ‡ã‚£ã‚¨ã‚´",
      introEN:"Silky tofu spread with basil & dill; layered with pickles.",
      introJP:"ãƒã‚¸ãƒ«ã¨ãƒ‡ã‚£ãƒ«é¦™ã‚‹è±†è…ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã€‚æµ…æ¼¬ã‘ã®é…¸å‘³ã§å¥¥è¡Œãã€‚",
      ingredientsEN:["Fresh bagels","Silken tofu, olive oil, salt","Basil, dill","Pickled radish/cucumber","Leafy greens"],
      ingredientsJP:["ç„¼ãç«‹ã¦ãƒ™ãƒ¼ã‚°ãƒ«","çµ¹è±†è…ãƒ»ã‚ªãƒªãƒ¼ãƒ–æ²¹ãƒ»å¡©","ãƒã‚¸ãƒ«ãƒ»ãƒ‡ã‚£ãƒ«","æµ…æ¼¬ã‘ï¼ˆå¤§æ ¹ãƒ»ãã‚…ã†ã‚Šï¼‰","ãƒªãƒ¼ãƒ•é‡èœ"],
      stepsEN:["Blend tofu + oil + salt until silky.","Fold herbs.","Spread thick; add pickles & greens."],
      stepsJP:["è±†è…ãƒ»æ²¹ãƒ»å¡©ã‚’æ’¹æ‹Œã€‚","ãƒãƒ¼ãƒ–ã‚’æ··ãœã‚‹ã€‚","åšã‚ã«å¡—ã£ã¦å…·ã‚’é‡ã­ã‚‹ã€‚"],
      finishEN:"Creamy, herby bite with bagel chew.",
      finishJP:"ã‚¯ãƒªãƒ¼ãƒŸãƒ¼ã§ãƒãƒ¼ãƒ–é¦™ã‚‹ä¸€å£ã€ãƒ™ãƒ¼ã‚°ãƒ«ã®å¼¾åŠ›ã€‚",
      notesEN:"Roasted nuts add crunch.",
      notesJP:"ãƒ­ãƒ¼ã‚¹ãƒˆãƒŠãƒƒãƒ„ã§é£Ÿæ„Ÿã‚¢ãƒƒãƒ—ã€‚"
    },
    {
      key: 6,
      icon:"ğŸœ",
      titleEN:"Rice Noodles in Clear Broth with Garden Herb Oil",
      titleJP:"æ¾„ã‚“ã ã‚¹ãƒ¼ãƒ—ã®ç±³éººã¨åº­ã®ãƒãƒ¼ãƒ–ã‚ªã‚¤ãƒ«",
      byEN:"Lan", byJP:"ãƒ©ãƒ³",
      introEN:"Light broth finished with a spoon of shisoâ€“basil oil.",
      introJP:"é€ãé€šã‚‹ã‚¹ãƒ¼ãƒ—ã«ã—ããƒ»ãƒã‚¸ãƒ«ã®é¦™å‘³æ²¹ã‚’ä¸€ã•ã˜ã€‚",
      ingredientsEN:["Rice noodles","Light chicken/vegetable broth","Herb oil (basil/shiso/parsley + salt)","Scallion, white pepper"],
      ingredientsJP:["ç±³éºº","è»½ã„é¶oré‡èœã‚¹ãƒ¼ãƒ—","ãƒãƒ¼ãƒ–ã‚ªã‚¤ãƒ«ï¼ˆãƒã‚¸ãƒ«ãƒ»ã—ããƒ»ãƒ‘ã‚»ãƒªï¼‹å¡©ï¼‰","ã­ããƒ»ç™½èƒ¡æ¤’"],
      stepsEN:["Blend herb oil (no heat).","Cook noodles; pour hot broth.","Finish with herb oil & scallion."],
      stepsJP:["ãƒãƒ¼ãƒ–ã‚ªã‚¤ãƒ«ã‚’ä½œã‚‹ï¼ˆéåŠ ç†±ï¼‰ã€‚","éººã‚’èŒ¹ã§ã¦ç†±ã„ã‚¹ãƒ¼ãƒ—ã‚’æ³¨ãã€‚","ã‚ªã‚¤ãƒ«ã¨ã­ãã§ä»•ä¸Šã’ã€‚"],
      finishEN:"Clear bowl with emerald swirls; feather-light yet aromatic.",
      finishJP:"æ¾„ã‚“ã æ¤€ã«ç·‘ã®ã‚ªã‚¤ãƒ«ãŒæ¼‚ã†ã€‚è»½ãã¦é¦™ã‚Šè±Šã‹ã€‚",
      notesEN:"Few drops of fish sauce deepen finish.",
      notesJP:"ãƒŠãƒ³ãƒ—ãƒ©ãƒ¼æ•°æ»´ã§ä½™éŸ»ãŒæ·±ã¾ã‚‹ã€‚"
    },
    {
      key: 7,
      icon:"ğŸ–",
      titleEN:"Wild Venison over Rice with Black Garlic",
      titleJP:"é¹¿è‚‰ã®é»’ã«ã‚“ã«ãã”é£¯",
      byEN:"Tomo", byJP:"ãƒˆãƒ¢",
      introEN:"Quick-seared venison brushed with black garlic over warm rice & greens.",
      introJP:"ã‚µãƒƒã¨ç„¼ã„ãŸé¹¿è‚‰ã«é»’ã«ã‚“ã«ãã‚’å¡—ã‚Šã€ã‚ã¤ã‚ã¤ã”é£¯ã¨é’èœã«ã®ã›ã‚‹ã€‚",
      ingredientsEN:["Thin-sliced venison","Black garlic paste","Salt, oil","Warm rice","SautÃ©ed greens"],
      ingredientsJP:["é¹¿è–„åˆ‡ã‚Š","é»’ã«ã‚“ã«ããƒšãƒ¼ã‚¹ãƒˆ","å¡©ãƒ»æ²¹","ç‚ŠããŸã¦ã”é£¯","é’èœã‚½ãƒ†ãƒ¼"],
      stepsEN:["Sear venison briefly; season.","Brush with black garlic while warm.","Serve over rice and greens."],
      stepsJP:["é¹¿è‚‰ã‚’çŸ­æ™‚é–“ã§ç„¼ãã€å¡©ã‚’å½“ã¦ã‚‹ã€‚","æ¸©ã‹ã„ã†ã¡ã«é»’ã«ã‚“ã«ãã‚’å¡—ã‚‹ã€‚","ã”é£¯ã¨é’èœã®ä¸Šã«ã®ã›ã‚‹ã€‚"],
      finishEN:"Juicy slices, sweetâ€“savory perfume, comforting bowl.",
      finishJP:"ã—ã£ã¨ã‚Šã—ãŸè‚‰ã¨ç”˜æ—¨ã„é¦™ã‚Šã€‚æº€ãŸã•ã‚Œã‚‹ä¸¼ã€‚",
      notesEN:"Do not overcookâ€”keep it blushing.",
      notesJP:"ç«å…¥ã‚Œã—ã™ããªã„ã®ãŒã‚³ãƒ„ã€‚"
    }
  ];

    function CafePage(){ 

 return `<section class="max-w-6xl mx-auto py-16 px-4 fade-enter"><h2 class="text-4xl font-serif mb-2" style="color:var(--forest-green);">${t().cafeTitle}</h2>
<p class="text-lg mb-8 italic" style="color:var(--olive);">${t().cafeSub}</p><div class="philo-wrap my-10">
  <div class="philo-row">
    <!-- Row 1 -->
    <div class="philo-track">
      ${PHILO_TOP.map(src => `<img src="${src}" class="philo-img" loading="lazy" referrerpolicy="no-referrer"/>`).join("")}
      ${PHILO_TOP.map(src => `<img src="${src}" class="philo-img" loading="lazy" referrerpolicy="no-referrer"/>`).join("")}
    </div>

    <div class="philo-track rev">
      ${PHILO_BOTTOM.map(src => `<img src="${src}" class="philo-img" loading="lazy" referrerpolicy="no-referrer"/>`).join("")}
      ${PHILO_BOTTOM.map(src => `<img src="${src}" class="philo-img" loading="lazy" referrerpolicy="no-referrer"/>`).join("")}
    </div>
  </div>
</div>
<section class="rounded-xl p-6 md:p-8" style="background:transparent;">
  <!-- Title stays aligned with other section headings (same left as container) -->
  <h3 class="text-2xl font-serif mb-4 mt-6" style="color: var(--forest-green);">
    ${t().philosophy}
  </h3>
<!-- Body: centered block with right-side blooming flower -->
<div class="max-w-6xl mx-auto">
  <div class="grid md:grid-cols-[1fr_320px] gap-6 items-start">
    <!-- Text -->
    <div class="max-w-3xl mx-auto md:mx-0">
      <div class="text-lg philo-lines text-left">
        <!-- æ—¢å­˜ã®è¡Œã”ã¨ãƒ•ã‚§ãƒ¼ãƒ‰å‡¦ç†ã¯ãã®ã¾ã¾ -->
        ${t().philosophyText
          .split("<br>")
          .map(line => line.trim()===""
            ? `<div class="philo-line" style="height:1rem;"></div>`
            : `<div class="philo-line">${line}</div>`
          ).join("")}
      </div>
    </div>

    <!-- Animated Flower (mdä»¥ä¸Šã§è¡¨ç¤º) -->
    <aside class="block md:block">
      <svg viewBox="0 0 200 240" class="bloom-svg" aria-hidden="true">
        <!-- background wash -->
        <ellipse cx="110" cy="130" rx="86" ry="64" fill="rgba(139,157,131,.12)"/>

        <!-- stem -->
        <path class="bloom-stem"
          d="M100 200 C 100 180, 98 160, 100 140 C 104 126, 108 120, 100 110"
          stroke="#6B7C59" stroke-width="6" fill="none" stroke-linecap="round"/>

        <!-- leaves -->
        <path d="M98 165 C 72 156, 64 148, 58 130 C 76 138, 84 146, 98 165 Z"
              fill="#8B9D83" opacity=".92"/>
        <path d="M102 155 C 128 148, 138 140, 146 122 C 128 130, 118 140, 102 155 Z"
              fill="#8B9D83" opacity=".88"/>

        <!-- petals (6) -->
        <defs>
          <!-- soft pastel pink core -->
          <radialGradient id="petalCute" cx="50%" cy="40%" r="75%">
            <stop offset="0%"  stop-color="#F1E9FF"/>   <!-- milky pink -->
            <stop offset="55%" stop-color="#F9C8D9"/>
            <stop offset="100%" stop-color="#F4B6CB"/>
          </radialGradient>

          <!-- subtle edge highlight (adds a glossy rim) -->
          <linearGradient id="petalRim" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%"   stop-color="white" stop-opacity="0.8"/>
            <stop offset="40%"  stop-color="white" stop-opacity="0"/>
            <stop offset="100%" stop-color="white" stop-opacity="0"/>
          </linearGradient>
        </defs>

        <!-- rounder / cuter petal shape:
            - chubbier lobes on top
            - soft point at bottom
            - sized to avoid covering stem/leaves -->
        <g>
          <!-- main pink petals -->
          <g fill="url(#petalCute)" stroke="#F8CAD7" stroke-width="1.2" stroke-linejoin="round" stroke-linecap="round" opacity="0.98">
            <!-- base petal (rotated via CSS var --rot around 100,98) -->
            <path class="bloom-petal" data-i="0" style="--rot:0deg"
              d="M100 64
                C 113 60, 126 68, 128 82
                C 129 92, 122 104, 110 110
                C 105 113, 100 118, 100 118
                C 100 118, 95 113, 90 110
                C 78 104, 71 92, 72 82
                C 74 68, 87 60, 100 64 Z" />
            <path class="bloom-petal" data-i="1" style="--rot:60deg"
              d="M100 64 C 113 60, 126 68, 128 82 C 129 92, 122 104, 110 110 C 105 113, 100 118, 100 118 C 100 118, 95 113, 90 110 C 78 104, 71 92, 72 82 C 74 68, 87 60, 100 64 Z"/>
            <path class="bloom-petal" data-i="2" style="--rot:120deg"
              d="M100 64 C 113 60, 126 68, 128 82 C 129 92, 122 104, 110 110 C 105 113, 100 118, 100 118 C 100 118, 95 113, 90 110 C 78 104, 71 92, 72 82 C 74 68, 87 60, 100 64 Z"/>
            <path class="bloom-petal" data-i="3" style="--rot:180deg"
              d="M100 64 C 113 60, 126 68, 128 82 C 129 92, 122 104, 110 110 C 105 113, 100 118, 100 118 C 100 118, 95 113, 90 110 C 78 104, 71 92, 72 82 C 74 68, 87 60, 100 64 Z"/>
            <path class="bloom-petal" data-i="4" style="--rot:240deg"
              d="M100 64 C 113 60, 126 68, 128 82 C 129 92, 122 104, 110 110 C 105 113, 100 118, 100 118 C 100 118, 95 113, 90 110 C 78 104, 71 92, 72 82 C 74 68, 87 60, 100 64 Z"/>
            <path class="bloom-petal" data-i="5" style="--rot:300deg"
              d="M100 64 C 113 60, 126 68, 128 82 C 129 92, 122 104, 110 110 C 105 113, 100 118, 100 118 C 100 118, 95 113, 90 110 C 78 104, 71 92, 72 82 C 74 68, 87 60, 100 64 Z"/>
          </g>

          <!-- glossy rim overlay (very subtle, adds â€œcuteâ€ sheen) -->
          <g fill="none" stroke="url(#petalRim)" stroke-width="1.2" opacity="0.7">
            <path class="bloom-petal" data-i="0" style="--rot:0deg"
              d="M100 64 C 113 60, 126 68, 128 82 C 129 92, 122 104, 110 110"/>
            <path class="bloom-petal" data-i="1" style="--rot:60deg"
              d="M100 64 C 113 60, 126 68, 128 82 C 129 92, 122 104, 110 110"/>
            <path class="bloom-petal" data-i="2" style="--rot:120deg"
              d="M100 64 C 113 60, 126 68, 128 82 C 129 92, 122 104, 110 110"/>
            <path class="bloom-petal" data-i="3" style="--rot:180deg"
              d="M100 64 C 113 60, 126 68, 128 82 C 129 92, 122 104, 110 110"/>
            <path class="bloom-petal" data-i="4" style="--rot:240deg"
              d="M100 64 C 113 60, 126 68, 128 82 C 129 92, 122 104, 110 110"/>
            <path class="bloom-petal" data-i="5" style="--rot:300deg"
              d="M100 64 C 113 60, 126 68, 128 82 C 129 92, 122 104, 110 110"/>
          </g>
        </g>

        <!-- flower center (brighter & cuter) -->
        <circle class="bloom-center" cx="100" cy="90" r="11" fill="#FFD87A"/>
        <circle cx="100" cy="88.8" r="5.2" fill="#FFF4CF" opacity="0.95"/>

        <!-- sparkles -->
        <g opacity=".9" fill="#FACC15">
          <circle class="bloom-sparkle" cx="60" cy="60" r="2" style="animation-delay:1.2s"/>
          <circle class="bloom-sparkle" cx="145" cy="55" r="2" style="animation-delay:1.35s"/>
          <circle class="bloom-sparkle" cx="160" cy="110" r="2" style="animation-delay:1.5s"/>
          <circle class="bloom-sparkle" cx="46" cy="110" r="2" style="animation-delay:1.65s"/>
        </g>
      </svg>
    </aside>
  </div>
</div>

</section>
<section class="grid md:grid-cols-2 gap-6 mt-8"><div class="bg-white rounded-xl shadow p-6 border border-[var(--warm-beige)]/60 card-hover"><div class="text-xs font-semibold inline-block px-2 py-1 rounded-full mb-3" style="background:var(--sage-green);color:#fff;">${lang==='EN'?'Today in the Kitchen':'æœ¬æ—¥ã®ã‚­ãƒƒãƒãƒ³'}</div><h4 class="text-xl font-semibold mb-2" style="color:var(--forest-green);">${lang==='EN'? 'What weâ€™re cooking':'ä»Šæ—¥ã¤ãã£ã¦ã„ã‚‹ã‚‚ã®'}</h4><ul class="text-sm leading-relaxed text-[var(--charcoal)] list-disc ml-5 space-y-1"><li>${lang==='EN'?'Pumpkin & miso soup from the garden':'åº­ã®ã‹ã¼ã¡ã‚ƒã¨å‘³å™Œã®ãŠå‘³å™Œæ±'}</li><li>${lang==='EN'?'Herb salad with edible flowers':'é£Ÿã¹ã‚‰ã‚Œã‚‹èŠ±ã¨ãƒãƒ¼ãƒ–ã®ã‚µãƒ©ãƒ€'}</li><li>${lang==='EN'?'Fermented pickles for winter':'å†¬ã«å‘ã‘ãŸç™ºé…µãƒ”ã‚¯ãƒ«ã‚¹'}</li></ul><div class="mt-4 text-sm text-[var(--olive)] italic">${lang==='EN'?'Menu changes daily based on harvest and donations.':'ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯åç©«çŠ¶æ³ãƒ»æŒã¡å¯„ã‚Šã«ã‚ˆã‚Šæ¯æ—¥å¤‰ã‚ã‚Šã¾ã™ã€‚'}</div></div><div class="bg-white rounded-xl shadow p-6 border border-[var(--warm-beige)]/60 card-hover"><h4 class="text-xl font-semibold mb-3 flex items-center gap-2" style="color:var(--forest-green);"><span>âš ï¸</span><span>${lang==='EN'?'Allergies & dietary notes':'ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ãƒ»é£Ÿäº‹ã®ã”å¸Œæœ›'}</span></h4><p class="text-sm leading-relaxed text-[var(--charcoal)] mb-3">${lang==='EN'?'Please tell us if you have allergies or foods you avoid. We will adapt your role (cutting, mixing, tasting, etc.) so you stay safe and still take part.':'ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã‚„é£Ÿã¹ã‚‰ã‚Œãªã„ã‚‚ã®ãŒã‚ã‚Œã°æ•™ãˆã¦ãã ã•ã„ã€‚å®‰å…¨ã«å‚åŠ ã§ãã‚‹ã‚ˆã†ã«ã€æ‹…å½“ä½œæ¥­ï¼ˆåˆ‡ã‚‹ãƒ»æ··ãœã‚‹ãƒ»å‘³ä»˜ã‘ãªã©ï¼‰ã‚’èª¿æ•´ã—ã¾ã™ã€‚'}</p><div class="rounded-lg p-3 text-xs" style="background:var(--warm-beige);color:var(--charcoal);">${lang==='EN'?'We handle shared tools / shared surfaces. Cross-contact is possible.':'é“å…·ãƒ»ä½œæ¥­å°ã¯åŸºæœ¬çš„ã«å…±æœ‰ã§ã™ã€‚å®Œå…¨ãªåˆ†é›¢ãŒé›£ã—ã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚'}</div></div></section><section class="grid md:grid-cols-2 gap-6 mt-8"><div class="bg-white rounded-xl shadow p-6 border border-[var(--warm-beige)]/60 card-hover"><h4 class="text-xl font-semibold mb-2 flex items-center gap-2" style="color:var(--forest-green);"><span>ğŸ‘</span><span>${lang==='EN'?'How you join the kitchen':'ã‚­ãƒƒãƒãƒ³ã¸ã®å‚åŠ ã®ã—ã‹ãŸ'}</span></h4><ul class="text-sm leading-relaxed text-[var(--charcoal)] list-disc ml-5 space-y-1"><li>${lang==='EN'?'Small roles for everyone: washing herbs, chopping, plating, welcoming guests.':'èª°ã§ã‚‚ã§ãã‚‹å°ã•ãªå½¹å‰²ï¼šé‡èœã‚’æ´—ã†ãƒ»åˆ»ã‚€ãƒ»ç››ã‚Šã¤ã‘ãƒ»ãŠå®¢ã•ã‚“ã‚’è¿ãˆã‚‹ãªã©'}</li><li>${lang==='EN'?'Children welcome. We give them real jobs (mixing, decorating, carrying bowls).':'å­ã©ã‚‚ã‚‚æ­“è¿ã€‚æœ¬ç‰©ã®ä»•äº‹ï¼ˆæ··ãœã‚‹ãƒ»é£¾ã‚‹ãƒ»ãŠçš¿ã‚’é‹ã¶ãªã©ï¼‰ãŒã‚ã‚Šã¾ã™ã€‚'}</li><li>${lang==='EN'?'You donâ€™t have to be â€œgood at cooking.â€ Curiosity is enough.':'ã€Œæ–™ç†ãŒä¸Šæ‰‹ã€ã§ã‚ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å¥½å¥‡å¿ƒãŒã‚ã‚Œã°OKã€‚'}</li></ul></div><div class="bg-white rounded-xl shadow p-6 border border-[color:var(--warm-beige)]/60 card-hover"><h4 class="text-xl font-semibold mb-2 flex items-center gap-2" style="color:var(--forest-green);"><span>ğŸ’—</span><span>${lang==='EN'?'How cost works here':'çµŒè²»ã®è€ƒãˆæ–¹'}</span></h4><p class="text-sm leading-relaxed text-[var(--charcoal)] mb-2">${lang==='EN'?'This kitchen is not a normal restaurant. Ingredients come from the garden, local farms, and what people bring.':'ã“ã“ã¯ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚é£Ÿæã¯ç•‘ãƒ»è¿‘æ‰€ã®è¾²å®¶ã•ã‚“ãƒ»ã¿ã‚“ãªã®æŒã¡å¯„ã‚Šã‹ã‚‰æ¥ã¾ã™ã€‚'}</p><p class="text-sm leading-relaxed text-[var(--charcoal)]">${lang==='EN'?'We invite a small contribution (food donation, ingredients, cash support) so we can keep cooking and welcoming new people.':'é‹å–¶ã®ãŸã‚ã«ã€ææ–™ã®æŒã¡å¯„ã‚Šã‚„å°‘é¡ã®ã‚µãƒãƒ¼ãƒˆè²»ã‚’ãŠé¡˜ã„ã—ã¦ã„ã¾ã™ã€‚ç¶šã‘ã¦ã„ããŸã‚ã®ä»•çµ„ã¿ã§ã™ã€‚'}</p></div></section><h3 class="text-2xl font-serif mb-4 mt-12" style="color: var(--forest-green);">
  ${t().recipes}
</h3>
<div class="grid md:grid-cols-3 gap-6">${recipes.map(r=>`<div class="recipe-card relative overflow-hidden rounded-xl bg-white shadow-lg group cursor-pointer h-80"><div class="recipe-front absolute inset-0 p-6 flex flex-col items-center justify-center transition-transform duration-500 group-hover:-translate-y-full bg-white"><div class="text-6xl mb-4">${r.icon}</div><h4 class="text-lg font-semibold text-center">${lang==='EN'?r.titleEN:r.titleJP}</h4><p class="text-sm italic mt-2" style="color: var(--olive);">${lang==='EN'?`Recipe by ${r.byEN}`:`${r.byJP}ã®ãƒ¬ã‚·ãƒ”`}</p></div><div class="recipe-back absolute inset-0 p-6 text-white transition-transform duration-500 translate-y-full group-hover:translate-y-0 overflow-y-auto" style="background: linear-gradient(135deg, var(--sage-green), var(--forest-green));"><h4 class="text-xl font-bold mb-3">${lang==='EN'?r.titleEN:r.titleJP}</h4><div class="space-y-2 text-sm"><p><strong>${t().ingredients}:</strong></p><ul class="list-disc ml-5 space-y-1">${(lang==='EN'?r.ingredientsEN:r.ingredientsJP).map(i=>`<li>${i}</li>`).join('')}</ul><button class="mt-4 btn w-full" style="background: var(--terracotta); color:#fff;" onclick="navigate('Recipe:${r.key}')">${t().viewRecipe}</button></div></div></div>`).join('')}</div><div class="text-center mt-8"><button class="btn">${t().shareRecipe}</button></div></section>`; }

      // è¡Œãƒ•ã‚§ãƒ¼ãƒ‰ã‚’ã€Œè¦‹ãˆãŸã‚‰é–‹å§‹ã€ã«
      function initPhiloReveal({ force = false } = {}) {
        const container = document.querySelector('.philo-lines');
        if (!container) return;

        const lines = Array.from(container.querySelectorAll('.philo-line'));
        if (!lines.length) return;

        // reset each time
        lines.forEach(l => l.classList.remove('show'));

        const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

        const reveal = () => {
          if (reduceMotion) { lines.forEach(l => l.classList.add('show')); return; }
          let i = 0;
          const step = () => {
            if (i < lines.length) {
              lines[i++].classList.add('show');
              setTimeout(step, 220);
            }
          };
          step();
        };

        // NEW: always allow a forced start (e.g., right after routing to CafÃ©)
        if (force) { requestAnimationFrame(reveal); return; }

        // existing logic (already-visible fast path)
        const rect = container.getBoundingClientRect();
        const vh = window.innerHeight || document.documentElement.clientHeight;
        if (rect.top < vh * 0.9 && rect.bottom > 0) {
          requestAnimationFrame(reveal);
          return;
        }

        // IO fallback
        if ('IntersectionObserver' in window) {
          const io = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                reveal();
                io.disconnect();
              }
            });
          }, { rootMargin: '0px 0px -10% 0px', threshold: 0.01 }); // slightly less strict bottom margin
          io.observe(container);
        } else {
          reveal();
        }
      }

      function initBloomOnView() {
        const svg = document.querySelector('.bloom-svg');
        if (!svg) return;

        const parts = svg.querySelectorAll('.bloom-stem, .bloom-petal, .bloom-center, .bloom-sparkle');

        // â‘  ã„ã£ãŸã‚“å…¨ã¦åœæ­¢ï¼ˆæ¯å›ãƒªã‚»ãƒƒãƒˆï¼‰
        parts.forEach(el => el.classList.add('anim-paused'));

        const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        const play = () => parts.forEach(el => el.classList.remove('anim-paused'));

        if (reduceMotion) return;

        // â‘¡ ã™ã§ã«è¦‹ãˆã¦ã„ã‚‹ãªã‚‰å³é–‹å§‹
        const rect = svg.getBoundingClientRect();
        const vh = window.innerHeight || document.documentElement.clientHeight;
        if (rect.top < vh * 0.9 && rect.bottom > 0) {
          requestAnimationFrame(play);
          return;
        }

        // â‘¢ IO ã§å¯è¦–ã«ãªã£ãŸã‚‰é–‹å§‹
        if ('IntersectionObserver' in window) {
          const io = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                play();
                io.disconnect();
              }
            });
          }, { rootMargin: '0px 0px -20% 0px', threshold: 0.01 });
          io.observe(svg);
        } else {
          play();
        }
      }
    
      function RecipePage(r){
        const title = (lang==='EN'? r.titleEN : r.titleJP);
        const by    = (lang==='EN'? r.byEN    : r.byJP);
        const intro = (lang==='EN'? r.introEN : r.introJP);
        const ings  = (lang==='EN'? r.ingredientsEN : r.ingredientsJP) || [];
        const steps = (lang==='EN'? r.stepsEN       : r.stepsJP) || [];
        const finish= (lang==='EN'? r.finishEN      : r.finishJP) || "";
        const notes = (lang==='EN'? r.notesEN       : r.notesJP)  || "";

        return `
          ${backBar(t().backSpaces,"Cafe")}
          <section class="max-w-3xl mx-auto px-4 fade-enter">
            <div class="flex items-center gap-3 mb-3">
              <div class="text-4xl">${r.icon || "ğŸ½ï¸"}</div>
              <h2 class="text-3xl md:text-4xl font-serif">${title}</h2>
            </div>
            <p class="text-sm text-gray-600 mb-4">
              ${lang==='EN' ? 'Recipe by' : 'ãƒ¬ã‚·ãƒ”'}: <strong>${by}</strong>
            </p>

            ${intro ? `<p class="text-lg leading-relaxed mb-6">${intro}</p>` : ''}

            <div class="bg-white rounded-xl shadow border p-5 mb-6" style="border-color:var(--warm-beige);">
              <h3 class="text-xl font-semibold mb-2" style="color:var(--forest-green);">${t().ingredients}</h3>
              <ul class="list-disc ml-5 space-y-1">
                ${ings.map(i=>`<li>${i}</li>`).join('')}
              </ul>
            </div>

            <div class="bg-white rounded-xl shadow border p-5 mb-6" style="border-color:var(--warm-beige);">
              <h3 class="text-xl font-semibold mb-2" style="color:var(--forest-green);">${lang==='EN'?'Steps':'æ‰‹é †'}</h3>
              <ol class="list-decimal ml-5 space-y-2">
                ${steps.map(s=>`<li>${s}</li>`).join('')}
              </ol>
            </div>

            ${finish ? `
              <div class="bg-white rounded-xl shadow border p-5 mb-6" style="border-color:var(--warm-beige);">
                <h3 class="text-lg font-semibold mb-2" style="color:var(--forest-green);">${lang==='EN'?'Finish':'ä»•ä¸ŠãŒã‚Š'}</h3>
                <p>${finish}</p>
              </div>` : ''}

            ${notes ? `
              <div class="rounded-xl p-4" style="background:var(--warm-beige);">
                <h4 class="font-semibold mb-1">${lang==='EN'?'Notes':'ãƒ¡ãƒ¢'}</h4>
                <p>${notes}</p>
              </div>` : ''}

            <div class="mt-8">
              <button class="btn" onclick="navigate('Cafe')">${lang==='EN'?'Back to CafÃ©':'ã‚«ãƒ•ã‚§ã¸æˆ»ã‚‹'}</button>
            </div>
          </section>
        `;
      }

    function isPast(isoStr){
      return new Date(isoStr).getTime() < Date.now();
    }

    let eventsView = 'upcoming'; // 'upcoming' | 'past'

    function EventsPage(){
      const now = Date.now();
      const filtered = eventList
        .slice() // copy
        .sort((a,b)=> new Date(a.date.full)-new Date(b.date.full))
        .filter(e => eventsView==='upcoming' ? new Date(e.date.full)>=now : new Date(e.date.full)<now);

      const counts = {
        upcoming: eventList.filter(e=>!isPast(e.date.full)).length,
        past:     eventList.filter(e=> isPast(e.date.full)).length
      };

      const segment = `
        <div class="inline-flex rounded-lg border overflow-hidden mb-6" style="border-color:var(--warm-beige);">
          <button onclick="eventsView='upcoming'; renderRoute();" class="px-4 py-2 ${eventsView==='upcoming'?'bg-white':'bg-[var(--cream)]'}">
            ${lang==='EN'?'Upcoming':'ã“ã‚Œã‹ã‚‰'} <span class="text-xs opacity-70">(${counts.upcoming})</span>
          </button>
          <button onclick="eventsView='past'; renderRoute();" class="px-4 py-2 ${eventsView==='past'?'bg-white':'bg-[var(--cream)]'}">
            ${lang==='EN'?'Past':'ã“ã‚Œã¾ã§'} <span class="text-xs opacity-70">(${counts.past})</span>
          </button>
        </div>`;

      return `
      <section class="max-w-6xl mx-auto py-16 px-4 fade-enter">
        <h2 class="text-4xl font-serif mb-2" style="color:var(--forest-green);">${t().eventsCal}</h2>
        <p class="text-lg mb-4 italic" style="color: var(--olive);">${t().eventsSub}</p>
        ${segment}
        <div class="grid md:grid-cols-3 gap-6">
          ${filtered.map((e,i)=>{
            const when = new Date(e.date.full);
            const badge = e.kind==='recurring'
              ? (lang==='EN'? e.recurEN : e.recurJP)
              : when.toLocaleDateString(lang==='EN'?'en-US':'ja-JP', { month:'short', day:'numeric', weekday:'short' });

            return card(`
              <div class="p-0">
                <img src="${e.img}" alt="event" class="h-44 w-full object-cover" loading="lazy" referrerpolicy="no-referrer"/>
                <div class="p-5">
                  <div class="flex items-center gap-2 mb-2">
                    <span class="text-xs px-2 py-1 rounded-full" style="background:${e.kind==='recurring'?'#E8DCC4':'#8B9D83'}; color:${e.kind==='recurring'?'#2C2A28':'#fff'};">${e.kind==='recurring' ? (lang==='EN'?'Recurring':'å®šæœŸ') : (lang==='EN'?'Special':'ç‰¹åˆ¥')}</span>
                    <span class="text-xs px-2 py-1 rounded-full border" style="border-color:var(--warm-beige);">${e.cat}</span>
                    <span class="text-xs opacity-70">${badge}</span>
                  </div>
                  <h3 class="text-lg font-semibold">${lang==='EN'?e.titleEN:e.titleJP}</h3>
                  <p class="text-sm text-gray-600 mt-1">${t().by}: ${lang==='EN'?e.hostEN:e.hostJP} Â· ${e.time}</p>
                  <div class="mt-3"><button class="btn" onclick="navigate('Event:${eventList.indexOf(e)}')">${eventsView==='upcoming'?t().join:(lang==='EN'?'View':'è©³ç´°')}</button></div>
                </div>
              </div>
            `);
          }).join('')}
        </div>
      </section>`;
    }

    function SpacesPage(){ return `<section class="max-w-6xl mx-auto py-16 px-4 text-center fade-enter"><h2 class="text-4xl font-serif mb-2" style="color:var(--forest-green);">${t().spacesTitle}</h2><p class="text-lg mb-10 italic" style="color:var(--olive);">${t().spacesSub}</p><div class="grid md:grid-cols-3 gap-6">${spaces.map(s=>`<div class="text-left cursor-pointer" onclick="navigate('Space:${s.key}')">${card(`<img src="${s.hero}" alt="${s.title}" class="h-48 w-full object-cover"/><div class="p-6 bg-white"><h3 class="text-xl font-semibold mb-2" style="color:${s.color};">${s.title}</h3><p class="text-sm text-gray-700">${lang === 'EN' ? s.cardDescEN : s.cardDescJP}</p></div>`)}</div>`).join('')}</div></section>`; }

    function ValuesPage(){
      const values = [
        {
          k:"Curiosity", jp:"å¥½å¥‡å¿ƒ", icon:"ğŸ”",
          img: imgUrl("images/Curiosity.jpg", 1400, 85),
          en:"We start with questions. Observe closely, ask why/how, run tiny experiments, and share what we notice.",
          jpText:"ã¾ãšå•ã„ã‹ã‚‰ã€‚ã‚ˆãè¦³å¯Ÿã—ã€ã€Œãªãœãƒ»ã©ã†ã—ã¦ã€ã¨ã„ã£ãŸå•ã„ã‚’é‡ã­ã€å®Ÿé¨“ã‚„ä»®èª¬æ¤œè¨¼ã§ç¢ºã‹ã‚ã€æ°—ã¥ãã‚’å…±æœ‰ã—ã¾ã™ã€‚",
          chips:["observe","ask","experiment"]
        },
        {
          k:"Creation", jp:"å‰µé€ åŠ›", icon:"ğŸ› ï¸",
          img: imgUrl("images/Creation.jpg", 1400, 85),
          en:"Ideas become prototypes. We make low-fi first, reuse materials, iterate together, and learn by doing.",
          jpText:"ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ã¾ãšè©¦ä½œå“ã«ã€‚æ‰‹å…ƒã®ç´ æã‚’æ´»ã‹ã—ã€ã¿ã‚“ãªã§æ”¹å–„ã—ãªãŒã‚‰ã€ã‚„ã£ã¦å­¦ã³ã¾ã™ã€‚",
          chips:["prototype","reuse","iterate"]
        },
        {
          k:"Care", jp:"æ€ã„ã‚„ã‚Š", icon:"ğŸ«¶",
          img: imgUrl("images/Care.jpg", 1400, 85),
          en:"Care for people, place, and materials. Practice consent, accessibility, safe food notes, repair, and low-waste habits.",
          jpText:"äººãƒ»å ´æ‰€ãƒ»ç´ æã‚’å¤§åˆ‡ã«ã€‚ç´å¾—æ„Ÿã¨åˆ©ä¾¿æ€§ã®è¿½æ±‚ã€é£Ÿã®é…æ…®ã€æ‰‹å…¥ã‚Œãƒ»ä¿®ç¹•ã€ãƒ­ã‚¹ã‚’æ¸›ã‚‰ã™å®Ÿè·µãªã©ã€‚",
          chips:["consent","access","low-waste"]
        },
        {
          k:"Collaboration", jp:"å”åƒ", icon:"ğŸ™Œ",
          img: imgUrl("images/Collaboration.jpg", 1400, 85),
          en:"We co-create. Roles rotate, credit is shared, decisions are transparent, and everyone can teach & learn.",
          jpText:"ã¿ã‚“ãªã§ã¤ãã‚‹ã€‚å½¹å‰²ã‚’å›ã—ã€åŠŸç¸¾ã‚’åˆ†ã‹ã¡ã€æ±ºã‚æ–¹ã‚’è¦‹ãˆã‚‹åŒ–ã€‚èª°ã§ã‚‚æ•™ãˆã‚‹ã“ã¨ã‚‚ã€å­¦ã¶ã“ã¨ã‚‚ã§ãã¾ã™ã€‚",
          chips:["rotate","share credit","open decisions"]
        },
      ];

      const label = (v) => (lang==='EN'?v.k:v.jp);
      const body  = (v) => (lang==='EN'?v.en:v.jpText);

      return `
        <section class="max-w-6xl mx-auto py-16 px-4 text-center fade-enter">
          <h2 class="text-4xl font-serif mb-2" style="color:var(--forest-green);">${t().valuesTitle}</h2>
          <p class="text-lg mb-6 italic" style="color:var(--olive);">${t().valuesSub}</p>

          <figure class="max-w-4xl mx-auto mb-10">
            <img src="images/CuriositasBright.png" alt="Curiositas visual" class="w-full max-w-2xl mx-auto object-contain"
                style="filter: drop-shadow(0 8px 24px rgba(0,0,0,.12));" loading="lazy" referrerpolicy="no-referrer"/>
          </figure>

          <div class="max-w-3xl mx-auto text-left space-y-5">
            ${values.map(v => `
              <div class="group bg-white rounded-xl border card-hover overflow-hidden"
                  style="border-color: var(--warm-beige);">

                <!-- photo header -->
                <div class="value-hero">
                  <img src="${v.img}" alt="${label(v)} photo" loading="lazy" />
                </div>

                <!-- text -->
                <div class="p-4 md:p-5 flex items-start gap-4">
                  <div class="text-xl" aria-hidden="true">${v.icon}</div>
                  <div class="flex-1">
                    <div class="flex items-center gap-2">
                      <h3 class="text-xl font-semibold"
                          style="color: var(--c-${v.k.toLowerCase()});">
                        ${label(v)}
                      </h3>
                      <span class="ml-auto hidden md:inline-flex gap-1 opacity-0 group-hover:opacity-100 transition">
                        ${v.chips.map(c=>`<span class="cal-chip">${c}</span>`).join('')}
                      </span>
                    </div>
                    <p class="mt-1 text-[0.98rem] leading-relaxed text-gray-700">${body(v)}</p>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
        </section>`;
    }

    function StoriesPage(){
      return `
      <section class="max-w-6xl mx-auto py-16 px-4 fade-enter">
        <h2 class="text-4xl font-serif mb-2" style="color:var(--forest-green);">${t().storiesTitle}</h2>
        <p class="text-lg mb-8 italic" style="color:var(--olive);">${t().storiesSub}</p>

        <div class="grid md:grid-cols-2 gap-6">
          ${stories.map(s => card(`
            <div class="p-0">
              <img src="${s.img}" alt="story" class="h-56 w-full object-cover"/>
              <div class="p-5">
                <h3 class="text-xl font-semibold">${lang==='EN' ? s.titleEN : s.titleJP}</h3>
                <p class="text-sm text-gray-600 mb-2">
                  ${lang==='EN' ? "By" : "åŸ·ç­†"}: ${s.by} Â· ${s.minutes} ${t().minRead}
                </p>

                <div class="text-sm text-gray-700 mb-3 leading-relaxed">
                  ${
                    lang==='EN'
                      ? firstParagraph(s.bodyEN)
                      : firstParagraph(s.bodyJP)
                  }
                </div>

                <button class="btn" onclick="navigate('Story:${s.key}')">
                  ${t().readMore}
                </button>
              </div>
            </div>
          `)).join('')}
        </div>
      </section>`;
    }

    // â€”â€” Stories helpers â€”â€”
    function firstParagraph(text){
      if(!text) return "";
      // æ®µè½ã®åŒºåˆ‡ã‚Šï¼ˆç©ºè¡Œ or <br><br>ï¼‰ã§æœ€åˆã®ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã‚’è¿”ã™
      const p = text.split(/\r?\n\s*\r?\n|<br\s*\/?>\s*<br\s*\/?>/i)[0];
      return p.trim();
    }
    function formatBody(text){
      if(!text) return "";
      // æ®µè½ã‚’ <p>â€¦</p> ã«ã€è¡Œå†…æ”¹è¡Œã¯ <br> ã«
      let html = text
        .split(/\r?\n\s*\r?\n/)
        .map(p => `<p>${p.replace(/\r?\n/g, '<br>')}</p>`)
        .join('');
      return html;
    }

    function GalleryPage() {
      const galleryItems = [
        {
          img: imgUrl("images/CafeFun.jpg", 800, 85),
          captionEN: "Board games & small talk",
          captionJP: "ã¿ã‚“ãªã§æ„‰å¿«ã«ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ãƒ»ä¸–é–“è©±"
        },
        {
          img: imgUrl("images/Veggies.jpg", 800, 85),
          captionEN: "Rich harvest",
          captionJP: "åç©«ã®å–œã³"
        },
        {
          img: imgUrl("images/PlantArt.jpg", 800, 85),
          captionEN: "Fresh leaf art",
          captionJP: "æ‹¾ã„ãŸã¦ã®è‘‰ã§ã‚¢ãƒ¼ãƒˆ"
        },
        {
          img: imgUrl("images/HammockTree.jpg", 800, 85),
          captionEN: "Relaxing reads",
          captionJP: "å®‰ã‚‰ãã®èª­æ›¸"
        },
        {
          img: imgUrl("images/Cookies.jpg", 800, 85),
          captionEN: "Pretty herb cookies",
          captionJP: "ã‹ã‚ã„ã„ãƒãƒ¼ãƒ–ã‚¯ãƒƒã‚­ãƒ¼"
        },
        {
          img: imgUrl("images/FreezeDried.jpg", 800, 85),
          captionEN: "Fruits to preserve",
          captionJP: "ä¿å­˜ç”¨ã«åŠ å·¥ã—ãŸãƒ•ãƒ«ãƒ¼ãƒ„"
        }
      ];

      return `
        <section class="max-w-6xl mx-auto py-16 px-4 fade-enter">
          <h2 class="text-4xl font-serif mb-2" style="color:var(--forest-green);">
            ${t().galleryTitle}
          </h2>
          <p class="text-lg mb-8 italic" style="color:var(--olive);">
            ${t().gallerySub}
          </p>
          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
            ${galleryItems.map(item => `
              <div class="relative aspect-square overflow-hidden rounded-xl group cursor-pointer card-hover">
                <img 
                  src="${item.img}" 
                  alt="${lang === 'EN' ? item.captionEN : item.captionJP}"
                  class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"
                  loading="lazy"
                />
                <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                <div class="absolute bottom-0 left-0 right-0 bg-[var(--forest-green)]/90 text-white text-sm p-3 translate-y-full group-hover:translate-y-0 transition-transform duration-300">
                  ${lang === 'EN' ? item.captionEN : item.captionJP}
                </div>
              </div>
            `).join('')}
          </div>
        </section>
      `;
    }

    function ProgramsPage(){ const progs=[{icon:"ğŸ³",en:"Cooking & Fermentation",jp:"æ–™ç†ã¨ç™ºé…µ"},{icon:"ğŸŒ±",en:"Gardening & Composting",jp:"åœ’èŠ¸ã¨å †è‚¥åŒ–"},{icon:"ğŸ¨",en:"Traditional Crafts",jp:"ä¼çµ±å·¥èŠ¸"},{icon:"ğŸ’»",en:"Digital Skills",jp:"ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¹ã‚­ãƒ«"},{icon:"ğŸŒ",en:"Language Exchange",jp:"è¨€èªäº¤æ›"},{icon:"ğŸ“–",en:"Storytelling",jp:"ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ãƒªãƒ³ã‚°"},]; return `<section class="max-w-6xl mx-auto py-16 px-4 fade-enter"><h2 class="text-4xl font-serif mb-2" style="color:var(--forest-green);">${t().programsTitle}</h2><p class="text-lg mb-8 italic" style="color:var(--olive);">${t().programsSub}</p><div class="grid md:grid-cols-3 gap-6">${progs.map(p=>card(`<div class=\"p-6 text-center bg-white\"><div class=\"text-5xl mb-2\">${p.icon}</div><h3 class=\"text-lg font-semibold\">${lang==='EN'?p.en:p.jp}</h3></div>`)).join('')}</div><div class="mt-10 text-center p-6 rounded-xl" style="background:var(--warm-beige);"><h3 class="text-xl font-semibold mb-1">${lang==='EN'?"Share Your Knowledge":"çŸ¥è­˜ã‚’å…±æœ‰ã—ã¾ã—ã‚‡ã†"}</h3><p class="mb-3">${lang==='EN'?"We believe everyone has something valuable to teach.":"èª°ã‚‚ãŒã€ä»–ã®èª°ã‹ã«ã¨ã£ã¦å­¦ã³ã¨ãªã‚‹çµŒé¨“ã‚„è¦–ç‚¹ã‚’æŒã£ã¦ã„ã¾ã™ã€‚"}</p><button class="btn">${t().propose}</button></div></section>`; }

    function GardenPage(){ return `<section class="max-w-6xl mx-auto py-16 px-4 fade-enter"><h2 class="text-4xl font-serif mb-2" style="color:var(--forest-green);">${t().gardenTitle}</h2><p class="text-lg mb-8 italic" style="color:var(--olive);">${t().gardenSub}</p>${GardenMapSection()}<div class="grid md:grid-cols-3 gap-6 mt-6">${card(`<div class=\"p-6\"><h3 class=\"text-xl font-semibold mb-2\">${t().growing}</h3><ul class=\"space-y-1\"><li>ğŸ«› Seasonal vegetables</li><li>ğŸª´ Culinary herbs</li><li>ğŸ… Tomatoes & peppers</li><li>ğŸ¥— Leafy greens</li><li>ğŸ« Berries and fruits</li><li>ğŸª» Dye plants</li></ul></div>`)}${card(`<div class=\"p-6\"><h3 class=\"text-xl font-semibold mb-2\">${t().involved}</h3><ul class=\"space-y-1\"><li>ğŸ‘ª Weekly gardening days</li><li>â™»ï¸ Recycling workshops</li><li>ğŸŒ± Seed-saving classes</li><li>ğŸŒ¾ Harvest celebrations</li><li>ğŸ‘¨â€ğŸŒ¾ Learn from experienced growers</li></ul></div>`)}${card(`<div class=\"p-6\"><h3 class=\"text-xl font-semibold mb-2\">${t().sustain}</h3><ul class=\"space-y-1\"><li>ğŸ§º Composting system</li><li>ğŸ’§ Rainwater harvesting</li><li>ğŸª¿ Natural pest control</li><li>ğŸ”ï¸ Zero-waste practices</li><li>ğŸ Organic methods</li></ul></div>`)} </div></section>`; }

    const visitFAQ = [
  { qEN:"Can I drop in?", qJP:"äºˆç´„ãªã—ã§ã‚‚å…¥ã‚Œã¾ã™ã‹ï¼Ÿ",
    aEN:"We welcome drop-ins when capacity allows. Booking guarantees a spot.",
    aJP:"æ··é›‘ã—ã¦ã„ãªã‘ã‚Œã°å¯èƒ½ã§ã™ã€‚ç¢ºå®Ÿã«å…¥ã‚ŠãŸã„å ´åˆã¯ã”äºˆç´„ãã ã•ã„ã€‚" },
  { qEN:"How much is it?", qJP:"æ–™é‡‘ã¯ï¼Ÿ",
    aEN:"We suggest a small contribution (Â¥500â€“Â¥1500) or bring ingredients.",
    aJP:"Â¥500ã€œÂ¥1500ã®ã‚µãƒãƒ¼ãƒˆã€ã¾ãŸã¯é£Ÿæã®æŒã¡å¯„ã‚Šã‚’ãŠé¡˜ã„ã—ã¦ã„ã¾ã™ã€‚" },
  { qEN:"Access", qJP:"ã‚¢ã‚¯ã‚»ã‚¹",
    aEN:"10 min by bus from JR HachiÅji â†’ 6 min walk. Detailed map sent after booking.",
    aJP:"JRå…«ç‹å­é§…ã‹ã‚‰ãƒã‚¹ã§10åˆ†â†’å¾’æ­©6åˆ†ã€‚è©³ç´°åœ°å›³ã¯äºˆç´„å¾Œã«ã”æ¡ˆå†…ã—ã¾ã™ã€‚" }
];

function VisitFAQ(){
  return `
    <div class="mt-6 space-y-2">
      ${visitFAQ.map(f=>`
        <div class="accordion">
          <button class="acc-header">
            <span>â“ ${lang==='EN'?f.qEN:f.qJP}</span><span>â–¾</span>
          </button>
          <div class="acc-content"><p class="p-2">${lang==='EN'?f.aEN:f.aJP}</p></div>
        </div>
      `).join('')}
    </div>`;
}

    function VisitPage(){ return `<section class="max-w-6xl mx-auto py-16 px-4 fade-enter"><h2 class="text-4xl font-serif mb-2" style="color:var(--forest-green);">${t().visitUs}</h2><p class="text-lg mb-8 italic" style="color:var(--olive);">${t().visitSub}</p><div class="grid md:grid-cols-3 gap-6">${card(`<div class=\"p-6\"><h3 class=\"text-xl font-semibold mb-2\">ğŸ“ ${t().location}</h3><p>HachiÅji, Tokyo, Japan<br/><em style=\"color:var(--olive);font-size:.8rem;\">${lang==='EN'?"Detailed address shared upon booking":"è©³ç´°ä½æ‰€ã¯äºˆç´„æ™‚ã«å…±æœ‰"}</em></p></div>`)}${card(`<div class=\"p-6\"><h3 class=\"text-xl font-semibold mb-2\">â° ${t().hours}</h3><p>Cafe: 10:00â€“18:00</p><p>Events: Various times</p><p>Garden: Daylight hours</p><p>Call Service: 10:00â€“21:00</p></div>`)}${card(`<div class=\"p-6\"><h3 class=\"text-xl font-semibold mb-2\">ğŸ“§ ${t().contact}</h3><form id=\"visitForm\" class=\"space-y-3\"><label class=\"block text-sm\">${lang==='EN'?"Your Name":"ãŠåå‰"}<input name=\"name\" class=\"mt-1 w-full p-3 rounded-md border\" placeholder=\"${lang==='EN'?"Your Name":"ãŠåå‰"}\"/></label><label class=\"block text-sm\">Email<input name=\"email\" class=\"mt-1 w-full p-3 rounded-md border\" placeholder=\"Email\"/></label><label class=\"block text-sm\">${lang==='EN'?"Message or Interest":"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸/é–¢å¿ƒ"}<textarea name=\"msg\" class=\"mt-1 w-full p-3 rounded-md border h-28\" placeholder=\"${lang==='EN'?"Tell us how you'd like to join":"ã©ã®ã‚ˆã†ã«å‚åŠ ã—ãŸã„ã‹æ•™ãˆã¦ãã ã•ã„"}\"></textarea></label><div class="flex items-center gap-3 mt-2">
  <button class="btn px-4 py-2" style="background:var(--terracotta);color:#fff;">
    ${t().sendInquiry}
  </button>

  <a href="tel:+818012345678"
     class="px-4 py-2 rounded-md text-sm font-medium border"
     style="border-color:var(--sage-green);color:var(--forest-green);">
    ğŸ“ ${lang==='EN' ? 'Call' : 'é›»è©±'}
  </a>
</div>
<div id=\"visitThanks\" class=\"hidden text-sm\" style=\"color:var(--forest-green);\">${lang==='EN'?"Thanks! We'll be in touch.":"ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚è¿½ã£ã¦ã”é€£çµ¡ã—ã¾ã™ã€‚"}</div></form></div>`)} </div><div class="mt-10 p-6 rounded-xl" style="background:var(--warm-beige);"><h3 class="text-xl font-semibold mb-2">${t().firstGuide}</h3><ol class="space-y-1 list-decimal ml-5"><li>${t().step1}</li><li>${t().step2}</li><li>${t().step3}</li><li>${t().step4}</li><li>${t().step5}</li></ol></div></section>`; }
    
    /* router */
    function renderRoute(){
      const hash = location.hash.slice(1) || "Home"; let html = "";
      if(hash.startsWith("Space:")){ const key=hash.split(":")[1]; const s=spaces.find(v=>v.key===key); if(s) html=SpaceDetail(s);
      } else if(hash.startsWith("Recipe:")){ const idx=Number(hash.split(":")[1]); const r = RECIPES.find(x => x.key === idx); if(r) html=RecipePage(r);
      } else if(hash.startsWith("Event:")){ const idx=Number(hash.split(":")[1]); const e=eventList[idx]; if(e) html=EventDetail(e);
      } else if(hash.startsWith("Story:")){ const idx=Number(hash.split(":")[1]); const s=stories.find(x=>x.key===idx); if(s) html=StoryDetail(s);
      } else {
        switch(hash){
          case "Home": html=HomePage(); break;
          case "Cafe": html=CafePage(); break;
          case "Events": html=EventsPage(); break;
          case "Spaces": html=SpacesPage(); break;
          case "Values": html=ValuesPage(); break;
          case "Stories": html=StoriesPage(); break;
          case "Gallery": html=GalleryPage(); break;
          case "Programs": html=ProgramsPage(); break;
          case "Garden": html=GardenPage(); break;
          case "Calendar": html=CalendarPage(); break;
          case "Visit": html=VisitPage(); break;
          default: html=HomePage();
        }
      }
      app.innerHTML = ""; const nodeWrap=document.createElement("div"); nodeWrap.innerHTML=html.trim(); const children=Array.from(nodeWrap.children); children.forEach(el=>{ el.classList.add("fade-enter"); requestAnimationFrame(()=> el.classList.add("fade-enter-active")); app.appendChild(el); });

      // counters on view
      setTimeout(()=>{ const counters=document.querySelectorAll('.stat-counter'); const observer=new IntersectionObserver((entries)=>{ entries.forEach(entry=>{ if(entry.isIntersecting){ const counter=entry.target.querySelector('.counter'); if(!counter) return; const target=parseInt(entry.target.dataset.target); const duration=parseInt(entry.target.dataset.duration); let current=0; const increment=target/(duration/16); const timer=setInterval(()=>{ current+=increment; if(current>=target){ counter.textContent=target; clearInterval(timer);} else { counter.textContent=Math.floor(current);} },16); observer.unobserve(entry.target); } }); }); counters.forEach(c=>observer.observe(c)); },100);

      // ãƒ«ãƒ¼ãƒˆæç”»å¾Œï¼ˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå®‰å®šã‚’å¾…ã¤ï¼‰
      setTimeout(() => {
        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            initPhiloReveal?.();
            initBloomOnView?.();
          });
        });
      }, 120);

      // visit form
      const vf=document.getElementById("visitForm"); if(vf){ vf.addEventListener("submit",(e)=>{ e.preventDefault(); const f=new FormData(vf); if(!f.get("name")||!f.get("email")){ alert(lang==='EN'?"Please fill name and email":"ãŠåå‰ã¨ãƒ¡ãƒ¼ãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"); return;} document.getElementById("visitThanks").classList.remove("hidden"); setTimeout(()=>document.getElementById("visitThanks").classList.add("hidden"),3000); vf.reset(); }); }

      document.getElementById("brandBtn").textContent=t().brand; document.getElementById("footerAbout").textContent="A community space where people and cultures meet, learn, and grow together."; document.getElementById("stickyBookingText").textContent=t().stickyBooking;
    }

    /* nav builders */
    function buildNav(){ const d=t(); const desktop=document.getElementById("desktopNav"); const mobile=document.getElementById("mobileNav");
      desktop.innerHTML = d.nav.map(p=>`<a href="#${p.k}" class="nav-link text-sm font-medium" style="color:var(--charcoal);">${lang==='EN'?p.en:p.jp}</a>`).join("") + ` <button id="langBtn" class="rounded-full text-white px-4 text-sm" style="background:var(--sage-green);">${d.langToggle}</button>`;
      mobile.innerHTML = d.nav.map(p=>`<a href="#${p.k}" class="text-sm py-2 text-center rounded-lg border bg-white" style="border-color:var(--warm-beige);">${lang==='EN'?p.en:p.jp}</a>`).join("");
      const langBtn=document.getElementById("langBtn"); const langBtnSm=document.getElementById("langBtnSm"); [langBtn,langBtnSm].forEach(btn=>{ if(!btn) return; btn.textContent=d.langToggle; btn.onclick=()=>{ lang=(lang==="EN"?"JP":"EN"); localStorage.setItem("fusion_lang",lang); buildNav(); renderRoute(); setTimeout(() => initPhiloReveal?.(), 0);}; });
    }

    /* testimonial carousel rotation */
    let currentTestimonial=0; window.goToTestimonial=(index)=>{ currentTestimonial=index; const track=document.getElementById("testimonialTrack"); const dots=document.querySelectorAll(".testimonial-dot"); if(!track)return; track.style.transform=`translateX(-${currentTestimonial*100}%)`; dots.forEach((d,i)=>{ d.style.background = i===currentTestimonial ? 'var(--sage-green)' : 'var(--warm-beige)'; }); };
    setInterval(()=>{ const track=document.getElementById("testimonialTrack"); const dots=document.querySelectorAll(".testimonial-dot"); if(!track||dots.length===0)return; currentTestimonial=(currentTestimonial+1)%dots.length; window.goToTestimonial(currentTestimonial); },5000);

    /* sticky booking show/hide on scroll */
    let lastScroll=0; window.addEventListener("scroll",()=>{ const currentScroll=window.pageYOffset; const stickyBooking=document.getElementById("stickyBooking"); if(currentScroll>300 && currentScroll>lastScroll){ stickyBooking.style.transform='translateY(0)'; } else if(currentScroll<lastScroll){ stickyBooking.style.transform='translateY(200px)'; } lastScroll=currentScroll; });

    /* init */
    window.navigate = navigate; document.getElementById("brandBtn").onclick=()=>navigate("Home"); const toggle=document.getElementById("menuToggle"); const wrap=document.getElementById("mobileNavWrap"); toggle.onclick=()=>{ const open=!wrap.classList.contains("hidden"); wrap.classList.toggle("hidden"); toggle.setAttribute("aria-expanded",String(!open)); };

    window.addEventListener("hashchange",renderRoute); buildNav(); renderRoute();

  </script>
</body>
</html>
